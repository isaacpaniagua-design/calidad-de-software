<!DOCTYPE html>
<html lang="es" data-layout="global">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mis Calificaciones · Plataforma QS</title>
    
    <script>
      // Injects a <base> tag to correctly resolve relative paths for assets (CSS, JS).
      // This is essential for deployments in subdirectories, like GitHub Pages.
      (function() {
        const getBasePath = () => {
          const path = window.location.pathname;
          // Assumes the project name is the first segment after the user/org name.
          // e.g., /user/repo-name/index.html -> /repo-name/
          const repoNameMatch = path.match(/^\/([a-zA-Z0-9_-]+)/);
          if (repoNameMatch) {
            // Check for localhost to handle local development gracefully.
            if (window.location.hostname === '127.0.0.1' || window.location.hostname === 'localhost') {
              return '/';
            }
            return `/${repoNameMatch[1]}/`;
          }
          return '/';
        };
        document.write('<base href="' + getBasePath() + '">');
      })();
    </script>

    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/calificaciones.css">
</head>
<body>
    <main class="page-shell">
        <div class="calificaciones-header">
            <h1>Panel de Calificaciones</h1>
            <p>Consulta el estado y feedback de tus entregas.</p>
        </div>
        
        <div id="calificaciones-summary" class="calificaciones-summary">
            <div class="summary-item" data-summary="promedio">
                <span class="summary-label">Promedio General</span>
                <span class="summary-value">--</span>
            </div>
            <div class="summary-item" data-summary="completadas">
                <span class="summary-label">Entregas Completadas</span>
                <span class="summary-value">--</span>
            </div>
            <div class="summary-item" data-summary="pendientes">
                <span class="summary-label">Entregas Pendientes</span>
                <span class="summary-value">--</span>
            </div>
        </div>

        <div id="calificaciones-container" class="calificaciones-container">
            <!-- El contenido se generará dinámicamente -->
        </div>

        <div class="calificaciones-status" id="calificaciones-status" role="status" aria-live="polite">
            Inicia sesión para ver tus calificaciones.
        </div>
    </main>
    
    <script type="module" src="js/calificaciones-logic.js"></script>
    <script defer src="js/back-home.js"></script>
    <script type="module" src="js/layout.js"></script>

</body>
</html>
