<!DOCTYPE html>
<html lang="es" data-layout="global" data-role="teacher">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Panel docente | Calidad de Software</title>
    <link rel="stylesheet" href="./css/layout.css" />
    <script>
      window.firebaseConfig = {
        apiKey: "AIzaSyBDip2OjSOUZrr3iiIle2Klodify9LaLe8",
        authDomain: "calidad-de-software-v2.firebaseapp.com",
        projectId: "calidad-de-software-v2",
        storageBucket: "calidad-de-software-v2.appspot.com",
        messagingSenderId: "220818066383",
        appId: "1:220818066383:web:0c2119f470a5f9711b60ba"
      };
    </script>
    <style>
      :root {
        --pd-bg: #f8fafc;
        --pd-surface: #ffffff;
        --pd-border: rgba(148, 163, 184, 0.35);
        --pd-primary: #2563eb;
        --pd-primary-soft: rgba(37, 99, 235, 0.12);
        --pd-danger: #dc2626;
        --pd-muted: #64748b;
        --pd-success: #16a34a;
        --pd-radius: 16px;
        --pd-shadow: 0 18px 40px rgba(15, 23, 42, 0.12);
        --pd-max-width: min(1180px, 94vw);
      }

      *, *::before, *::after {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        background: var(--pd-bg);
        color: #0f172a;
      }

      .pd-layout {
        display: flex;
        flex-direction: column;
        min-height: 100vh;
      }

      .pd-toolbar {
        background: var(--pd-surface);
        border-bottom: 1px solid var(--pd-border);
        position: sticky;
        top: 0;
        z-index: 20;
      }

      .pd-toolbar__inner {
        margin: 0 auto;
        max-width: var(--pd-max-width);
        padding: 14px clamp(16px, 4vw, 28px);
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 18px;
      }

      .pd-brand {
        font-size: clamp(1.05rem, 3vw, 1.35rem);
        font-weight: 700;
        letter-spacing: -0.01em;
      }

      .pd-toolbar__actions {
        display: inline-flex;
        align-items: center;
        gap: 12px;
        flex-wrap: wrap;
      }

      .pd-button {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        padding: 8px 16px;
        border-radius: 999px;
        font-weight: 600;
        font-size: 0.92rem;
        cursor: pointer;
        border: 1px solid transparent;
        transition: background 0.2s ease, color 0.2s ease, border-color 0.2s ease;
        background: rgba(15, 23, 42, 0.04);
        color: #1e293b;
      }

      .pd-button.primary {
        background: var(--pd-primary);
        color: #fff;
        border-color: transparent;
      }

      .pd-button.secondary {
        background: transparent;
        border-color: rgba(37, 99, 235, 0.4);
        color: var(--pd-primary);
      }

      .pd-button.danger {
        background: rgba(220, 38, 38, 0.09);
        border-color: rgba(220, 38, 38, 0.45);
        color: var(--pd-danger);
      }

      .pd-button:disabled {
        cursor: default;
        opacity: 0.55;
      }

      .pd-tabs {
        margin: 0 auto;
        max-width: var(--pd-max-width);
        padding: clamp(8px, 2vw, 16px) clamp(16px, 4vw, 28px);
        display: flex;
        gap: 12px;
        flex-wrap: wrap;
      }

      .pd-tabs button {
        border: 1px solid transparent;
        border-radius: 999px;
        padding: 8px 18px;
        background: transparent;
        color: var(--pd-muted);
        font-weight: 600;
        font-size: 0.9rem;
        cursor: pointer;
        transition: background 0.2s ease, color 0.2s ease, border-color 0.2s ease;
      }

      .pd-tabs button[aria-pressed="true"] {
        background: var(--pd-primary-soft);
        border-color: rgba(37, 99, 235, 0.35);
        color: var(--pd-primary);
      }

      main.pd-main {
        flex: 1;
        width: 100%;
        margin: 0 auto;
        max-width: var(--pd-max-width);
        padding: clamp(16px, 4vw, 28px);
        display: grid;
        gap: clamp(18px, 3vw, 28px);
      }

      .pd-section-header {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-between;
        align-items: flex-start;
        gap: 16px;
      }

      .pd-section-header h2 {
        margin: 0;
        font-size: clamp(1.1rem, 3vw, 1.35rem);
      }

      .pd-collections-grid {
        display: grid;
        gap: clamp(16px, 3vw, 24px);
      }

      @media (min-width: 960px) {
        .pd-collections-grid {
          grid-template-columns: repeat(2, minmax(0, 1fr));
        }
      }

      .pd-collection {
        background: var(--pd-surface);
        border: 1px solid var(--pd-border);
        border-radius: var(--pd-radius);
        padding: clamp(16px, 3vw, 22px);
        display: flex;
        flex-direction: column;
        gap: 16px;
        box-shadow: 0 8px 18px rgba(15, 23, 42, 0.05);
      }

      .pd-collection__header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        gap: 16px;
      }

      .pd-collection__header h3 {
        margin: 0;
        font-size: 1.05rem;
      }

      .pd-collection__header p {
        margin: 4px 0 0;
        color: var(--pd-muted);
        font-size: 0.85rem;
      }

      .pd-collection__actions {
        display: inline-flex;
        gap: 8px;
        flex-wrap: wrap;
      }

      .pd-collection__content {
        display: grid;
        gap: 16px;
      }

      .pd-collection__list {
        display: grid;
        gap: 12px;
        max-height: 320px;
        overflow: auto;
        padding-right: 4px;
      }

      .pd-collection-item {
        border: 1px solid var(--pd-border);
        border-radius: 12px;
        padding: 12px;
        background: rgba(148, 163, 184, 0.08);
        display: grid;
        gap: 8px;
      }

      .pd-collection-item__header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        gap: 12px;
        font-size: 0.9rem;
      }

      .pd-code {
        margin: 0;
        padding: 12px;
        background: rgba(15, 23, 42, 0.08);
        border-radius: 10px;
        font-size: 0.8rem;
        max-height: 220px;
        overflow: auto;
        line-height: 1.35;
      }

      .pd-collection-form {
        display: grid;
        gap: 12px;
      }

      .pd-collection-form label {
        display: grid;
        gap: 6px;
        font-weight: 600;
        font-size: 0.85rem;
      }

      .pd-collection-form input,
      .pd-collection-form textarea {
        width: 100%;
        padding: 10px;
        border-radius: 10px;
        border: 1px solid var(--pd-border);
        font: inherit;
        background: #fff;
      }

      .pd-collection-form textarea {
        min-height: 120px;
        resize: vertical;
      }

      .pd-collection-form__actions {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
      }

      .pd-collection-empty {
        color: var(--pd-muted);
        font-size: 0.9rem;
      }

      .pd-banner {
        padding: 12px 16px;
        border-radius: 10px;
        font-size: 0.95rem;
        border: 1px solid transparent;
      }

      .pd-banner.info { background: rgba(37, 99, 235, 0.08); border-color: rgba(37, 99, 235, 0.28); color: var(--pd-primary); }
      .pd-banner.error { background: rgba(220, 38, 38, 0.08); border-color: rgba(220, 38, 38, 0.28); color: var(--pd-danger); }
      .pd-banner.success { background: rgba(22, 163, 74, 0.08); border-color: rgba(22, 163, 74, 0.28); color: var(--pd-success); }

      section[data-view-panel] {
        display: none;
        grid-template-columns: 1fr;
        gap: clamp(16px, 3vw, 24px);
      }

      section[data-view-panel].active {
        display: grid;
      }

      .pd-card {
        background: var(--pd-surface);
        border-radius: var(--pd-radius);
        border: 1px solid var(--pd-border);
        box-shadow: var(--pd-shadow);
        padding: clamp(18px, 3vw, 26px);
        display: grid;
        gap: clamp(12px, 2.5vw, 20px);
      }

      .pd-card h2,
      .pd-card h3 {
        margin: 0;
        font-weight: 700;
        letter-spacing: -0.01em;
      }

      .pd-muted { color: var(--pd-muted); }

      .pd-metric-grid {
        display: grid;
        gap: 12px;
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      }

      .pd-metric {
        border-radius: 14px;
        border: 1px solid rgba(148, 163, 184, 0.25);
        padding: 16px;
        background: rgba(248, 250, 252, 0.8);
        display: grid;
        gap: 4px;
      }

      .pd-metric strong {
        font-size: 1.9rem;
        font-weight: 700;
      }

      .pd-table-wrap {
        overflow-x: auto;
        border: 1px solid rgba(148, 163, 184, 0.25);
        border-radius: 12px;
        background: rgba(248, 250, 252, 0.65);
      }

      table {
        width: 100%;
        border-collapse: collapse;
        min-width: 600px;
      }

      th, td {
        padding: 10px 14px;
        border-bottom: 1px solid rgba(148, 163, 184, 0.25);
        text-align: left;
        font-size: 0.92rem;
      }

      tbody tr:hover { background: rgba(37, 99, 235, 0.05); }

      .pd-form-grid { display: grid; gap: 16px; }

      .pd-field {
        display: flex;
        flex-direction: column;
        gap: 6px;
        font-size: 0.9rem;
      }

      .pd-field input,
      .pd-field textarea,
      .pd-field select {
        border-radius: 10px;
        border: 1px solid rgba(148, 163, 184, 0.45);
        padding: 10px 12px;
        font-size: 0.95rem;
        font-family: inherit;
        background: rgba(255, 255, 255, 0.95);
      }

      .pd-flex {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        align-items: center;
      }

      .pd-list {
        display: grid;
        gap: 12px;
      }

      .pd-upload-card {
        border: 1px solid rgba(148, 163, 184, 0.3);
        border-radius: 14px;
        padding: 14px 16px;
        background: rgba(248, 250, 252, 0.85);
        display: grid;
        gap: 8px;
      }

      .pd-upload-meta {
        display: flex;
        flex-wrap: wrap;
        gap: 8px 16px;
        font-size: 0.88rem;
        color: var(--pd-muted);
      }

      .pd-upload-actions {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
      }

      .pd-material-item {
        border: 1px solid rgba(148, 163, 184, 0.25);
        border-radius: 12px;
        padding: 12px 16px;
        background: rgba(248, 250, 252, 0.8);
        display: grid;
        gap: 6px;
      }

      .pd-empty {
        text-align: center;
        padding: 26px;
        color: var(--pd-muted);
      }

      .pd-log {
        font-family: "Roboto Mono", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
        font-size: 0.82rem;
        background: rgba(15, 23, 42, 0.04);
        border-radius: 10px;
        border: 1px solid rgba(148, 163, 184, 0.25);
        padding: 10px 12px;
        max-height: 200px;
        overflow: auto;
      }

      @media (max-width: 720px) {
        .pd-toolbar__inner { flex-direction: column; align-items: flex-start; }
        .pd-toolbar__actions { width: 100%; justify-content: space-between; }
        table { min-width: 520px; }
      }
    </style>
  </head>
  <body>
    <div class="pd-layout">
      <header class="pd-toolbar">
        <div class="pd-toolbar__inner">
          <div class="pd-brand">Panel docente</div>
          <div class="pd-toolbar__actions">
            <span id="pd-user-email" class="pd-user"></span>
            <button id="pd-sign-in" class="pd-button primary" type="button">Iniciar sesion</button>
            <button id="pd-sign-out" class="pd-button secondary" type="button" hidden>Cerrar sesion</button>
          </div>
        </div>
      </header>

      <nav class="pd-tabs" aria-label="Secciones del panel">
        <button type="button" data-action="switch-view" data-target="overview" aria-pressed="true">Resumen</button>
        <button type="button" data-action="switch-view" data-target="students">Alumnos</button>
        <button type="button" data-action="switch-view" data-target="uploads">Evidencias</button>
        <button type="button" data-action="switch-view" data-target="materials">Materiales</button>
        <button type="button" data-action="switch-view" data-target="datasets">Colecciones</button>
        <button type="button" data-action="switch-view" data-target="admin">Administracion</button>
      </nav>

      <main class="pd-main">
        <section id="pd-status-banner" class="pd-banner" hidden></section>

        <section data-view-panel="overview" class="active">
          <article class="pd-card">
            <h2>Resumen en tiempo real</h2>
            <p class="pd-muted">Los datos se sincronizan directamente con Firebase. Selecciona el grupo para filtrar la informacion.</p>
            <div class="pd-flex">
              <label class="pd-field" style="flex: 1 1 220px; max-width: 260px;">
                Grupo activo
                <select id="pd-group-select"></select>
              </label>
              <button class="pd-button secondary" id="pd-refresh-overview" type="button">Actualizar ahora</button>
            </div>
            <div class="pd-metric-grid">
              <div class="pd-metric">
                <span>Alumnos registrados</span>
                <strong id="pd-count-members">--</strong>
              </div>
              <div class="pd-metric">
                <span>Evidencias recibidas (7 dias)</span>
                <strong id="pd-count-uploads">--</strong>
              </div>
              <div class="pd-metric">
                <span>Evidencias pendientes</span>
                <strong id="pd-count-pending">--</strong>
              </div>
              <div class="pd-metric">
                <span>Materiales publicados</span>
                <strong id="pd-count-materials">--</strong>
              </div>
            </div>
          </article>

          <article class="pd-card">
            <h3>Actividad reciente</h3>
            <div id="pd-activity-log" class="pd-log" aria-live="polite">Esperando datos...</div>
          </article>
        </section>

        <section data-view-panel="students">
          <article class="pd-card">
            <h2>Gestion de alumnos</h2>
            <p class="pd-muted">Edita la informacion basica de cada alumno para mantener sincronizada la lista del grupo.</p>
            <form id="pd-member-form" class="pd-form-grid" autocomplete="off">
              <div class="pd-field">
                <label>UID de Firebase (opcional)
                  <input type="text" name="uid" placeholder="UID si el alumno ya inicio sesion" />
                </label>
              </div>
              <div class="pd-field">
                <label>Matricula / ID de control
                  <input type="text" name="matricula" required />
                </label>
              </div>
              <div class="pd-field">
                <label>Nombre completo
                  <input type="text" name="displayName" required />
                </label>
              </div>
              <div class="pd-field">
                <label>Correo institucional
                  <input type="email" name="email" required />
                </label>
              </div>
              <div class="pd-flex">
                <button type="submit" class="pd-button primary">Guardar alumno</button>
                <button type="button" id="pd-member-reset" class="pd-button secondary">Limpiar formulario</button>
                <button type="button" id="pd-member-delete" class="pd-button danger" disabled>Eliminar alumno</button>
              </div>
            </form>
          </article>

          <article class="pd-card">
            <h3>Alumnos del grupo</h3>
            <div class="pd-table-wrap" role="region" aria-live="polite">
              <table id="pd-members-table">
                <thead>
                  <tr>
                    <th>Nombre</th>
                    <th>Matricula</th>
                    <th>Correo</th>
                    <th>UID</th>
                    <th>Actualizado</th>
                  </tr>
                </thead>
                <tbody id="pd-members-body">
                  <tr><td colspan="5" class="pd-empty">Sin alumnos registrados.</td></tr>
                </tbody>
              </table>
            </div>
          </article>
        </section>

        <section data-view-panel="uploads">
          <article class="pd-card">
            <h2>Evidencias de los alumnos</h2>
            <div class="pd-flex">
              <label class="pd-field" style="flex: 1 1 260px;">
                Buscar (nombre, correo, evidencia)
                <input type="search" id="pd-upload-search" placeholder="Filtrar evidencias" />
              </label>
              <button type="button" id="pd-refresh-uploads" class="pd-button secondary">Actualizar lista</button>
            </div>
            <div id="pd-uploads-list" class="pd-list" aria-live="polite">
              <p class="pd-empty">Sin evidencias registradas.</p>
            </div>
          </article>
        </section>

        <section data-view-panel="materials">
          <article class="pd-card">
            <h2>Materiales para la clase</h2>
            <form id="pd-material-form" class="pd-form-grid">
              <div class="pd-field">
                <label>Titulo
                  <input type="text" name="title" required />
                </label>
              </div>
              <div class="pd-field">
                <label>Categoria
                  <input type="text" name="category" placeholder="Presentaciones, videos, etc." />
                </label>
              </div>
              <div class="pd-field">
                <label>URL del recurso
                  <input type="url" name="url" required />
                </label>
              </div>
              <div class="pd-field">
                <label>Descripcion breve
                  <textarea name="description" rows="3"></textarea>
                </label>
              </div>
              <button type="submit" class="pd-button primary">Publicar material</button>
            </form>
          </article>
          <article class="pd-card">
            <h3>Materiales publicados</h3>
            <div id="pd-materials-list" class="pd-list" aria-live="polite">
              <p class="pd-empty">Aun no hay materiales registrados.</p>
            </div>
          </article>
        </section>

        <section data-view-panel="datasets">
          <article class="pd-card">
            <div class="pd-section-header">
              <div>
                <h2>Gestion de colecciones</h2>
                <p class="pd-muted">Consulta y administra los documentos clave del curso directamente desde Firebase.</p>
              </div>
              <div class="pd-collection__actions">
                <button type="button" class="pd-button secondary" data-action="refresh-all-collections">Recargar todas</button>
              </div>
            </div>
            <p class="pd-muted">Selecciona una coleccion para cargar sus registros. Puedes editar un documento existente o crear uno nuevo introduciendo los datos en formato JSON.</p>
          </article>

          <div class="pd-collections-grid">
            <article class="pd-collection" data-collection="attendances">
              <div class="pd-collection__header">
                <div>
                  <h3>Asistencias</h3>
                  <p>Documentos de la coleccion <strong>attendances</strong>.</p>
                </div>
                <div class="pd-collection__actions">
                  <span class="pd-muted">Registros: <strong data-collection-count="attendances">0</strong></span>
                  <button type="button" class="pd-button secondary" data-action="refresh-collection" data-collection="attendances">Recargar</button>
                </div>
              </div>
              <div class="pd-collection__content">
                <div id="pd-collection-attendances" class="pd-collection__list" aria-live="polite">
                  <p class="pd-collection-empty">Sin datos cargados.</p>
                </div>
                <form class="pd-collection-form" data-collection-form="attendances">
                  <label>
                    ID del documento (opcional)
                    <input type="text" name="docId" placeholder="Deja vacio para generar uno nuevo" autocomplete="off" />
                  </label>
                  <label>
                    Datos en formato JSON
                    <textarea name="docData" placeholder='{ "campo": "valor" }'></textarea>
                  </label>
                  <div class="pd-collection-form__actions">
                    <button type="submit" class="pd-button primary">Guardar</button>
                    <button type="button" class="pd-button secondary" data-action="reset-form" data-collection="attendances">Limpiar</button>
                    <button type="button" class="pd-button danger" data-action="delete-doc" data-collection="attendances">Eliminar</button>
                  </div>
                </form>
              </div>
            </article>

            <article class="pd-collection" data-collection="courses">
              <div class="pd-collection__header">
                <div>
                  <h3>Cursos</h3>
                  <p>Documentos de la coleccion <strong>courses</strong>.</p>
                </div>
                <div class="pd-collection__actions">
                  <span class="pd-muted">Registros: <strong data-collection-count="courses">0</strong></span>
                  <button type="button" class="pd-button secondary" data-action="refresh-collection" data-collection="courses">Recargar</button>
                </div>
              </div>
              <div class="pd-collection__content">
                <div id="pd-collection-courses" class="pd-collection__list" aria-live="polite">
                  <p class="pd-collection-empty">Sin datos cargados.</p>
                </div>
                <form class="pd-collection-form" data-collection-form="courses">
                  <label>
                    ID del documento (opcional)
                    <input type="text" name="docId" placeholder="Deja vacio para generar uno nuevo" autocomplete="off" />
                  </label>
                  <label>
                    Datos en formato JSON
                    <textarea name="docData" placeholder='{ "nombre": "Calidad de Software" }'></textarea>
                  </label>
                  <div class="pd-collection-form__actions">
                    <button type="submit" class="pd-button primary">Guardar</button>
                    <button type="button" class="pd-button secondary" data-action="reset-form" data-collection="courses">Limpiar</button>
                    <button type="button" class="pd-button danger" data-action="delete-doc" data-collection="courses">Eliminar</button>
                  </div>
                </form>
              </div>
            </article>

            <article class="pd-collection" data-collection="forum_topics">
              <div class="pd-collection__header">
                <div>
                  <h3>Temas del foro</h3>
                  <p>Documentos de la coleccion <strong>forum_topics</strong>.</p>
                </div>
                <div class="pd-collection__actions">
                  <span class="pd-muted">Registros: <strong data-collection-count="forum_topics">0</strong></span>
                  <button type="button" class="pd-button secondary" data-action="refresh-collection" data-collection="forum_topics">Recargar</button>
                </div>
              </div>
              <div class="pd-collection__content">
                <div id="pd-collection-forum_topics" class="pd-collection__list" aria-live="polite">
                  <p class="pd-collection-empty">Sin datos cargados.</p>
                </div>
                <form class="pd-collection-form" data-collection-form="forum_topics">
                  <label>
                    ID del documento (opcional)
                    <input type="text" name="docId" placeholder="Deja vacio para generar uno nuevo" autocomplete="off" />
                  </label>
                  <label>
                    Datos en formato JSON
                    <textarea name="docData" placeholder='{ "titulo": "Presentaciones" }'></textarea>
                  </label>
                  <div class="pd-collection-form__actions">
                    <button type="submit" class="pd-button primary">Guardar</button>
                    <button type="button" class="pd-button secondary" data-action="reset-form" data-collection="forum_topics">Limpiar</button>
                    <button type="button" class="pd-button danger" data-action="delete-doc" data-collection="forum_topics">Eliminar</button>
                  </div>
                </form>
              </div>
            </article>

            <article class="pd-collection" data-collection="grupos">
              <div class="pd-collection__header">
                <div>
                  <h3>Grupos</h3>
                  <p>Documentos de la coleccion <strong>grupos</strong>.</p>
                </div>
                <div class="pd-collection__actions">
                  <span class="pd-muted">Registros: <strong data-collection-count="grupos">0</strong></span>
                  <button type="button" class="pd-button secondary" data-action="refresh-collection" data-collection="grupos">Recargar</button>
                </div>
              </div>
              <div class="pd-collection__content">
                <div id="pd-collection-grupos" class="pd-collection__list" aria-live="polite">
                  <p class="pd-collection-empty">Sin datos cargados.</p>
                </div>
                <form class="pd-collection-form" data-collection-form="grupos">
                  <label>
                    ID del documento (opcional)
                    <input type="text" name="docId" placeholder="Deja vacio para generar uno nuevo" autocomplete="off" />
                  </label>
                  <label>
                    Datos en formato JSON
                    <textarea name="docData" placeholder='{ "nombre": "calidad-2025" }'></textarea>
                  </label>
                  <div class="pd-collection-form__actions">
                    <button type="submit" class="pd-button primary">Guardar</button>
                    <button type="button" class="pd-button secondary" data-action="reset-form" data-collection="grupos">Limpiar</button>
                    <button type="button" class="pd-button danger" data-action="delete-doc" data-collection="grupos">Eliminar</button>
                  </div>
                </form>
              </div>
            </article>

            <article class="pd-collection" data-collection="materials">
              <div class="pd-collection__header">
                <div>
                  <h3>Materiales (global)</h3>
                  <p>Documentos de la coleccion <strong>materials</strong>.</p>
                </div>
                <div class="pd-collection__actions">
                  <span class="pd-muted">Registros: <strong data-collection-count="materials">0</strong></span>
                  <button type="button" class="pd-button secondary" data-action="refresh-collection" data-collection="materials">Recargar</button>
                </div>
              </div>
              <div class="pd-collection__content">
                <div id="pd-collection-materials" class="pd-collection__list" aria-live="polite">
                  <p class="pd-collection-empty">Sin datos cargados.</p>
                </div>
                <form class="pd-collection-form" data-collection-form="materials">
                  <label>
                    ID del documento (opcional)
                    <input type="text" name="docId" placeholder="Deja vacio para generar uno nuevo" autocomplete="off" />
                  </label>
                  <label>
                    Datos en formato JSON
                    <textarea name="docData" placeholder='{ "title": "Sesion 1" }'></textarea>
                  </label>
                  <div class="pd-collection-form__actions">
                    <button type="submit" class="pd-button primary">Guardar</button>
                    <button type="button" class="pd-button secondary" data-action="reset-form" data-collection="materials">Limpiar</button>
                    <button type="button" class="pd-button danger" data-action="delete-doc" data-collection="materials">Eliminar</button>
                  </div>
                </form>
              </div>
            </article>

            <article class="pd-collection" data-collection="studentUploads">
              <div class="pd-collection__header">
                <div>
                  <h3>Evidencias globales</h3>
                  <p>Documentos de la coleccion <strong>studentUploads</strong>.</p>
                </div>
                <div class="pd-collection__actions">
                  <span class="pd-muted">Registros: <strong data-collection-count="studentUploads">0</strong></span>
                  <button type="button" class="pd-button secondary" data-action="refresh-collection" data-collection="studentUploads">Recargar</button>
                </div>
              </div>
              <div class="pd-collection__content">
                <div id="pd-collection-studentUploads" class="pd-collection__list" aria-live="polite">
                  <p class="pd-collection-empty">Sin datos cargados.</p>
                </div>
                <form class="pd-collection-form" data-collection-form="studentUploads">
                  <label>
                    ID del documento (opcional)
                    <input type="text" name="docId" placeholder="Deja vacio para generar uno nuevo" autocomplete="off" />
                  </label>
                  <label>
                    Datos en formato JSON
                    <textarea name="docData" placeholder='{ "title": "Entrega 1" }'></textarea>
                  </label>
                  <div class="pd-collection-form__actions">
                    <button type="submit" class="pd-button primary">Guardar</button>
                    <button type="button" class="pd-button secondary" data-action="reset-form" data-collection="studentUploads">Limpiar</button>
                    <button type="button" class="pd-button danger" data-action="delete-doc" data-collection="studentUploads">Eliminar</button>
                  </div>
                </form>
              </div>
            </article>

            <article class="pd-collection" data-collection="teachers">
              <div class="pd-collection__header">
                <div>
                  <h3>Docentes</h3>
                  <p>Documentos de la coleccion <strong>teachers</strong>.</p>
                </div>
                <div class="pd-collection__actions">
                  <span class="pd-muted">Registros: <strong data-collection-count="teachers">0</strong></span>
                  <button type="button" class="pd-button secondary" data-action="refresh-collection" data-collection="teachers">Recargar</button>
                </div>
              </div>
              <div class="pd-collection__content">
                <div id="pd-collection-teachers" class="pd-collection__list" aria-live="polite">
                  <p class="pd-collection-empty">Sin datos cargados.</p>
                </div>
                <form class="pd-collection-form" data-collection-form="teachers">
                  <label>
                    ID del documento (opcional)
                    <input type="text" name="docId" placeholder="Deja vacio para generar uno nuevo" autocomplete="off" />
                  </label>
                  <label>
                    Datos en formato JSON
                    <textarea name="docData" placeholder='{ "displayName": "Docente" }'></textarea>
                  </label>
                  <div class="pd-collection-form__actions">
                    <button type="submit" class="pd-button primary">Guardar</button>
                    <button type="button" class="pd-button secondary" data-action="reset-form" data-collection="teachers">Limpiar</button>
                    <button type="button" class="pd-button danger" data-action="delete-doc" data-collection="teachers">Eliminar</button>
                  </div>
                </form>
              </div>
            </article>
          </div>
        </section>

        <section data-view-panel="admin">
          <article class="pd-card">
            <h2>Herramientas de administracion</h2>
            <div class="pd-form-grid">
              <form id="pd-allowlist-form" class="pd-form-grid">
                <div class="pd-field">
                  <label>Agregar correo de docente autorizado
                    <input type="email" name="teacherEmail" placeholder="docente@potros.itson.edu.mx" required />
                  </label>
                </div>
                <button type="submit" class="pd-button primary">Agregar a la lista dinamica</button>
              </form>
              <button type="button" id="pd-load-allowlist" class="pd-button secondary">Ver lista actual</button>
              <textarea id="pd-allowlist-view" class="pd-log" rows="6" readonly>
Presiona "Ver lista actual" para consultar la configuracion.
              </textarea>
            </div>
            <h3>Resumen del entorno</h3>
            <div id="pd-admin-log" class="pd-log" aria-live="polite"></div>
          </article>
        </section>
      </main>
    </div>

    <script type="module" src="./js/paneldocente-app.js"></script>
    <script type="module" src="./js/role-gate.js"></script>
    <script type="module" src="./js/layout.js"></script>
    <script defer src="js/back-home.js"></script>
  </body>
</html>
