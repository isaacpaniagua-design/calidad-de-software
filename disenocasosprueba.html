<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dise√±o de Casos de Prueba</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #2d3748;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: white;
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border-left: 8px solid #667eea;
            text-align: center;
        }

        .main-title {
            font-size: 2.5em;
            font-weight: bold;
            color: #2d3748;
            margin-bottom: 15px;
        }

        .subtitle {
            font-size: 1.3em;
            color: #4a5568;
            margin-bottom: 20px;
        }

        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .metric-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-left: 5px solid #667eea;
            transition: transform 0.3s ease;
        }

        .metric-card:hover {
            transform: translateY(-5px);
        }

        .metric-card.passed {
            border-left-color: #48bb78;
        }

        .metric-card.failed {
            border-left-color: #e53e3e;
        }

        .metric-card.pending {
            border-left-color: #ed8936;
        }

        .metric-card.blocked {
            border-left-color: #9f7aea;
        }

        .metric-number {
            font-size: 2.5em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
        }

        .metric-number.passed {
            color: #48bb78;
        }

        .metric-number.failed {
            color: #e53e3e;
        }

        .metric-number.pending {
            color: #ed8936;
        }

        .metric-number.blocked {
            color: #9f7aea;
        }

        .metric-label {
            font-size: 1.1em;
            color: #4a5568;
            font-weight: bold;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 30px;
        }

        .test-form {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .form-title {
            font-size: 1.8em;
            font-weight: bold;
            color: #2d3748;
            margin-bottom: 30px;
            text-align: center;
        }

        .form-section {
            margin-bottom: 30px;
            padding: 20px;
            background: #f7fafc;
            border-radius: 15px;
            border-left: 4px solid #667eea;
        }

        .section-title {
            font-size: 1.2em;
            font-weight: bold;
            color: #2d3748;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }

        .section-icon {
            margin-right: 10px;
            font-size: 1.3em;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-label {
            font-size: 0.9em;
            color: #4a5568;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .form-input, .form-select, .form-textarea {
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s ease;
        }

        .form-input:focus, .form-select:focus, .form-textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .form-textarea {
            min-height: 100px;
            resize: vertical;
        }

        .priority-badge, .type-badge, .status-badge {
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: bold;
            text-align: center;
            display: inline-block;
            margin: 5px;
        }

        .priority-high {
            background: #fed7d7;
            color: #c53030;
        }

        .priority-medium {
            background: #feebc8;
            color: #c05621;
        }

        .priority-low {
            background: #c6f6d5;
            color: #22543d;
        }

        .type-functional {
            background: #bee3f8;
            color: #2c5282;
        }

        .type-usability {
            background: #e6fffa;
            color: #234e52;
        }

        .type-performance {
            background: #fbb6ce;
            color: #97266d;
        }

        .type-security {
            background: #fed7d7;
            color: #c53030;
        }

        .type-integration {
            background: #d6f5d6;
            color: #22543d;
        }

        .status-passed {
            background: #c6f6d5;
            color: #22543d;
        }

        .status-failed {
            background: #fed7d7;
            color: #c53030;
        }

        .status-pending {
            background: #feebc8;
            color: #c05621;
        }

        .status-blocked {
            background: #e9d8fd;
            color: #553c9a;
        }

        .status-not-executed {
            background: #e2e8f0;
            color: #4a5568;
        }

        .steps-container {
            background: white;
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
        }

        .step-item {
            display: flex;
            align-items: flex-start;
            padding: 10px;
            margin: 5px 0;
            background: #f7fafc;
            border-radius: 8px;
            border-left: 3px solid #667eea;
        }

        .step-number {
            background: #667eea;
            color: white;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8em;
            font-weight: bold;
            margin-right: 15px;
            flex-shrink: 0;
        }

        .step-content {
            flex: 1;
        }

        .step-input {
            width: 100%;
            padding: 8px;
            border: 1px solid #e2e8f0;
            border-radius: 5px;
            margin-top: 5px;
        }

        .add-step-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9em;
            margin-top: 10px;
        }

        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .sidebar-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .sidebar-title {
            font-size: 1.2em;
            font-weight: bold;
            color: #2d3748;
            margin-bottom: 15px;
        }

        .template-button {
            background: #f7fafc;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            padding: 15px;
            margin: 5px 0;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
        }

        .template-button:hover {
            border-color: #667eea;
            background: #ebf4ff;
        }

        .template-title {
            font-weight: bold;
            color: #2d3748;
            margin-bottom: 5px;
        }

        .template-description {
            color: #4a5568;
            font-size: 0.9em;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .action-button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            font-size: 1em;
        }

        .action-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
        }

        .action-button.secondary {
            background: linear-gradient(135deg, #718096, #4a5568);
        }

        .action-button.success {
            background: linear-gradient(135deg, #48bb78, #38a169);
        }

        .action-button.danger {
            background: linear-gradient(135deg, #e53e3e, #c53030);
        }

        .test-list {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin: 30px 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .list-title {
            font-size: 1.8em;
            font-weight: bold;
            color: #2d3748;
            text-align: center;
            margin-bottom: 30px;
        }

        .test-item {
            background: #f7fafc;
            border-radius: 15px;
            padding: 20px;
            margin: 15px 0;
            border-left: 5px solid #667eea;
            transition: transform 0.3s ease;
        }

        .test-item:hover {
            transform: translateX(5px);
        }

        .test-item.high {
            border-left-color: #e53e3e;
        }

        .test-item.medium {
            border-left-color: #ed8936;
        }

        .test-item.low {
            border-left-color: #48bb78;
        }

        .test-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .test-id {
            background: #2d3748;
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8em;
            font-weight: bold;
        }

        .test-title {
            font-size: 1.1em;
            font-weight: bold;
            color: #2d3748;
            margin: 10px 0;
        }

        .test-meta {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            align-items: center;
        }

        .test-module {
            color: #4a5568;
            font-size: 0.9em;
        }

        .filters {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .filter-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }

        .filter-select {
            padding: 8px 12px;
            border: 2px solid #e2e8f0;
            border-radius: 6px;
            font-size: 0.9em;
        }

        .execution-panel {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            display: none;
        }

        .execution-panel.active {
            display: block;
        }

        .execution-step {
            background: #f7fafc;
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            border-left: 4px solid #e2e8f0;
        }

        .execution-step.current {
            border-left-color: #667eea;
            background: #ebf4ff;
        }

        .execution-step.passed {
            border-left-color: #48bb78;
            background: #f0fff4;
        }

        .execution-step.failed {
            border-left-color: #e53e3e;
            background: #fff5f5;
        }

        .step-controls {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .step-btn {
            padding: 5px 15px;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            font-size: 0.8em;
            font-weight: bold;
        }

        .step-btn.pass {
            background: #48bb78;
            color: white;
        }

        .step-btn.fail {
            background: #e53e3e;
            color: white;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .main-title {
                font-size: 2em;
            }
            
            .dashboard {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .container {
                padding: 10px;
            }
        }

        @media print {
            body {
                background: white;
            }
            
            .sidebar,
            .action-buttons,
            .filters {
                display: none;
            }
            
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        .hidden {
            display: none;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin: 10px 0;
        }

        .data-table th,
        .data-table td {
            padding: 8px 12px;
            border: 1px solid #e2e8f0;
            text-align: left;
        }

        .data-table th {
            background: #f7fafc;
            font-weight: bold;
        }

        .requirement-link {
            background: #667eea;
            color: white;
            padding: 3px 8px;
            border-radius: 10px;
            font-size: 0.8em;
            text-decoration: none;
            display: inline-block;
            margin: 2px;
        }

        .requirement-link:hover {
            background: #5a67d8;
        }
    </style>
</head>
<body>

<style>
  .qs-nav{position:sticky;top:0;z-index:50;backdrop-filter:saturate(140%) blur(6px);background:rgba(255,255,255,.85);border-bottom:1px solid #e5e7eb}
  .qs-nav .wrap{max-width:1100px;margin:0 auto;padding:10px 16px;display:flex;gap:12px;align-items:center;justify-content:space-between;font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial}
  .qs-brand{display:flex;gap:10px;align-items:center;color:#1f2937;font-weight:600;text-decoration:none}
  .qs-tabs{display:flex;gap:8px;flex-wrap:wrap}
  .qs-btn{border:0;padding:8px 12px;border-radius:999px;background:#f3f4f6;color:#111827;cursor:pointer;text-decoration:none}
  .qs-btn[aria-current="page"]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;pointer-events:none}
  @media (max-width:720px){ .qs-tabs{flex:1;justify-content:flex-end} .qs-brand span{display:none} }
</style>
<div class="qs-nav">
  <div class="wrap">
    <a class="qs-brand" href="index.html"><span>Plataforma QS</span></a>
    <nav class="qs-tabs" aria-label="Navegaci√≥n">
      <a class="qs-btn" href="materiales.html">Materiales</a>
      <a class="qs-btn" href="asistencia.html">Asistencia</a>
      <a class="qs-btn" href="calificaciones.html">Calificaciones</a>
      <a class="qs-btn" href="Foro.html">Foro</a>
      <a class="qs-btn" href="paneldocente.html">Panel</a>
      <a class="qs-btn" href="roadmap.html">Roadmap</a>
          <a class="qs-btn" href="checklist.html">Checklist</a>
\1
  </div>
</div>
<script>
(function(){
  var path = (location.pathname.split('/').pop()||'index.html').toLowerCase();
  document.querySelectorAll('.qs-tabs a.qs-btn').forEach(function(a){
    if (a.getAttribute('href').toLowerCase() === path) a.setAttribute('aria-current','page');
  });
})();
window.google = window.google || {};
google.script = google.script || {};
if (!google.script.run){
  google.script.run = new Proxy({}, { get:() => ()=>({ withSuccessHandler: f=>({ withFailureHandler: g=>({ }) }) }) });
}
</script>


    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="main-title">üß™ Dise√±o de Casos de Prueba</div>
            <div class="subtitle">Sistema de Gesti√≥n de Test Cases</div>
        </div>

        <!-- Dashboard -->
        <div class="dashboard">
            <div class="metric-card passed">
                <div class="metric-number passed" id="passedTests">15</div>
                <div class="metric-label">Pasaron</div>
            </div>
            <div class="metric-card failed">
                <div class="metric-number failed" id="failedTests">3</div>
                <div class="metric-label">Fallaron</div>
            </div>
            <div class="metric-card pending">
                <div class="metric-number pending" id="pendingTests">8</div>
                <div class="metric-label">Pendientes</div>
            </div>
            <div class="metric-card blocked">
                <div class="metric-number blocked" id="blockedTests">2</div>
                <div class="metric-label">Bloqueados</div>
            </div>
            <div class="metric-card">
                <div class="metric-number" id="totalTests">28</div>
                <div class="metric-label">Total Casos</div>
            </div>
            <div class="metric-card">
                <div class="metric-number" id="coveragePercent">85</div>
                <div class="metric-label">% Cobertura</div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Test Case Form -->
            <div class="test-form">
                <div class="form-title">üìù Nuevo Caso de Prueba</div>

                <!-- Basic Information -->
                <div class="form-section">
                    <div class="section-title">
                        <span class="section-icon">üìã</span>
                        Informaci√≥n B√°sica
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">ID del Caso de Prueba</label>
                            <input type="text" class="form-input" id="testId" value="CP-LOGIN-001" readonly>
                        </div>
                        <div class="form-group">
                            <label class="form-label">M√≥dulo/Funcionalidad</label>
                            <select class="form-select" id="module" onchange="updateTestId()">
                                <option value="LOGIN">Autenticaci√≥n de Usuario</option>
                                <option value="REG">Registro de Usuario</option>
                                <option value="CART">Carrito de Compras</option>
                                <option value="PAY">Procesamiento de Pagos</option>
                                <option value="PROF">Gesti√≥n de Perfil</option>
                                <option value="REP">Reportes y Analytics</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Requisito Asociado</label>
                            <input type="text" class="form-input" id="requirement" value="REQ-005" placeholder="Ej: REQ-005">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Prioridad</label>
                            <select class="form-select" id="priority">
                                <option value="high" selected>Alta</option>
                                <option value="medium">Media</option>
                                <option value="low">Baja</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Tipo de Prueba</label>
                            <select class="form-select" id="testType">
                                <option value="functional" selected>Funcional</option>
                                <option value="usability">Usabilidad</option>
                                <option value="performance">Rendimiento</option>
                                <option value="security">Seguridad</option>
                                <option value="integration">Integraci√≥n</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Estado</label>
                            <select class="form-select" id="status">
                                <option value="not-executed" selected>No Ejecutado</option>
                                <option value="passed">Pas√≥</option>
                                <option value="failed">Fall√≥</option>
                                <option value="pending">Pendiente</option>
                                <option value="blocked">Bloqueado</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">T√≠tulo/Prop√≥sito</label>
                        <input type="text" class="form-input" id="title" value="Verificar el inicio de sesi√≥n exitoso con credenciales v√°lidas" placeholder="Breve descripci√≥n del objetivo">
                    </div>
                </div>

                <!-- Preconditions -->
                <div class="form-section">
                    <div class="section-title">
                        <span class="section-icon">‚öôÔ∏è</span>
                        Precondiciones
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Estado requerido del sistema ANTES de ejecutar</label>
                        <textarea class="form-textarea" id="preconditions" placeholder="Ej: El usuario 'testuser' debe existir en la base de datos y estar activo">- El usuario 'testuser' debe existir en la base de datos y estar activo.
- El sistema debe estar en la p√°gina de login.
- La base de datos debe estar disponible y funcionando correctamente.</textarea>
                    </div>
                </div>

                <!-- Test Steps -->
                <div class="form-section">
                    <div class="section-title">
                        <span class="section-icon">üìã</span>
                        Pasos de la Prueba
                    </div>
                    
                    <div class="steps-container" id="stepsContainer">
                        <div class="step-item">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <input type="text" class="step-input" value="Ingresar el nombre de usuario en el campo 'Usuario'" placeholder="Descripci√≥n del paso">
                            </div>
                        </div>
                        <div class="step-item">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <input type="text" class="step-input" value="Ingresar la contrase√±a en el campo 'Contrase√±a'" placeholder="Descripci√≥n del paso">
                            </div>
                        </div>
                        <div class="step-item">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <input type="text" class="step-input" value="Hacer clic en el bot√≥n 'Ingresar'" placeholder="Descripci√≥n del paso">
                            </div>
                        </div>
                    </div>
                    
                    <button class="add-step-btn" onclick="addTestStep()">‚ûï Agregar Paso</button>
                </div>

                <!-- Test Data -->
                <div class="form-section">
                    <div class="section-title">
                        <span class="section-icon">üíæ</span>
                        Datos de Prueba
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Valores espec√≠ficos a utilizar</label>
                        <table class="data-table" id="testDataTable">
                            <thead>
                                <tr>
                                    <th>Campo</th>
                                    <th>Valor</th>
                                    <th>Descripci√≥n</th>
                                    <th>Acci√≥n</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Usuario</td>
                                    <td>testuser</td>
                                    <td>Usuario v√°lido existente</td>
                                    <td><button class="step-btn fail" onclick="removeDataRow(this)">√ó</button></td>
                                </tr>
                                <tr>
                                    <td>Contrase√±a</td>
                                    <td>Password123</td>
                                    <td>Contrase√±a correcta</td>
                                    <td><button class="step-btn fail" onclick="removeDataRow(this)">√ó</button></td>
                                </tr>
                            </tbody>
                        </table>
                        <button class="add-step-btn" onclick="addDataRow()">‚ûï Agregar Dato</button>
                    </div>
                </div>

                <!-- Expected Results -->
                <div class="form-section">
                    <div class="section-title">
                        <span class="section-icon">‚úÖ</span>
                        Resultados Esperados
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Descripci√≥n detallada de lo que DEBE ocurrir</label>
                        <textarea class="form-textarea" id="expectedResult" placeholder="Ej: El sistema debe redirigir al usuario al Dashboard principal">El sistema debe redirigir al usuario al Dashboard principal. Se debe mostrar el nombre de usuario 'testuser' en la esquina superior derecha. Debe aparecer un mensaje de bienvenida: "Bienvenido, testuser".</textarea>
                    </div>
                </div>

                <!-- Execution Results -->
                <div class="form-section">
                    <div class="section-title">
                        <span class="section-icon">üìä</span>
                        Resultados de Ejecuci√≥n
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Resultado Actual</label>
                            <textarea class="form-textarea" id="actualResult" placeholder="Se llena durante la ejecuci√≥n de la prueba"></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Observaciones</label>
                            <textarea class="form-textarea" id="observations" placeholder="Informaci√≥n adicional, datos de rendimiento, sugerencias"></textarea>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Ejecutado por</label>
                            <input type="text" class="form-input" id="executedBy" placeholder="Nombre del tester">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Fecha de Ejecuci√≥n</label>
                            <input type="date" class="form-input" id="executionDate">
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="action-buttons">
                    <button class="action-button success" onclick="saveTestCase()">üíæ Guardar Caso</button>
                    <button class="action-button" onclick="executeTest()">‚ñ∂Ô∏è Ejecutar Prueba</button>
                    <button class="action-button secondary" onclick="previewTest()">üëÅÔ∏è Vista Previa</button>
                    <button class="action-button secondary" onclick="clearForm()">üóëÔ∏è Limpiar</button>
                </div>
            </div>

            <!-- Sidebar -->
            <div class="sidebar">
                <!-- Templates -->
                <div class="sidebar-card">
                    <div class="sidebar-title">üìã Plantillas R√°pidas</div>
                    
                    <div class="template-button" onclick="loadTemplate('login')">
                        <div class="template-title">üîê Login/Autenticaci√≥n</div>
                        <div class="template-description">Casos de inicio de sesi√≥n</div>
                    </div>
                    
                    <div class="template-button" onclick="loadTemplate('form')">
                        <div class="template-title">üìù Validaci√≥n de Formularios</div>
                        <div class="template-description">Pruebas de campos y validaciones</div>
                    </div>
                    
                    <div class="template-button" onclick="loadTemplate('navigation')">
                        <div class="template-title">üß≠ Navegaci√≥n</div>
                        <div class="template-description">Flujos de navegaci√≥n y men√∫s</div>
                    </div>
                    
                    <div class="template-button" onclick="loadTemplate('api')">
                        <div class="template-title">üîå API/Integraci√≥n</div>
                        <div class="template-description">Pruebas de servicios web</div>
                    </div>
                </div>

                <!-- Guidelines -->
                <div class="sidebar-card">
                    <div class="sidebar-title">üí° Mejores Pr√°cticas</div>
                    <ul style="color: #4a5568; font-size: 0.9em; line-height: 1.6;">
                        <li>Use IDs √∫nicos y descriptivos</li>
                        <li>Escriba pasos claros y espec√≠ficos</li>
                        <li>Incluya datos de prueba exactos</li>
                        <li>Defina resultados esperados detallados</li>
                        <li>Mantenga precondiciones actualizadas</li>
                        <li>Documente observaciones importantes</li>
                    </ul>
                </div>

                <!-- Quick Actions -->
                <div class="sidebar-card">
                    <div class="sidebar-title">‚ö° Acciones R√°pidas</div>
                    <button class="action-button" style="width: 100%; margin: 5px 0;" onclick="generateTestId()">üîÑ Generar ID</button>
                    <button class="action-button secondary" style="width: 100%; margin: 5px 0;" onclick="exportToPDF()">üìÑ Exportar PDF</button>
                    <button class="action-button secondary" style="width: 100%; margin: 5px 0;" onclick="cloneTestCase()">üìã Clonar Caso</button>
                </div>
            </div>
        </div>

        <!-- Execution Panel -->
        <div class="execution-panel" id="executionPanel">
            <div class="form-title">üîÑ Ejecuci√≥n de Prueba: <span id="executingTestId"></span></div>
            
            <div id="executionSteps">
                <!-- Steps will be populated here -->
            </div>
            
            <div class="action-buttons">
                <button class="action-button success" onclick="completeExecution('passed')">‚úÖ Marcar como Pas√≥</button>
                <button class="action-button danger" onclick="completeExecution('failed')">‚ùå Marcar como Fall√≥</button>
                <button class="action-button secondary" onclick="cancelExecution()">üö´ Cancelar</button>
            </div>
        </div>

        <!-- Filters -->
        <div class="filters">
            <div class="filter-row">
                <select class="filter-select" id="moduleFilter" onchange="applyFilters()">
                    <option value="all">Todos los M√≥dulos</option>
                    <option value="LOGIN">Autenticaci√≥n</option>
                    <option value="REG">Registro</option>
                    <option value="CART">Carrito</option>
                    <option value="PAY">Pagos</option>
                </select>
                
                <select class="filter-select" id="priorityFilter" onchange="applyFilters()">
                    <option value="all">Todas las Prioridades</option>
                    <option value="high">Alta</option>
                    <option value="medium">Media</option>
                    <option value="low">Baja</option>
                </select>
                
                <select class="filter-select" id="typeFilter" onchange="applyFilters()">
                    <option value="all">Todos los Tipos</option>
                    <option value="functional">Funcional</option>
                    <option value="usability">Usabilidad</option>
                    <option value="performance">Rendimiento</option>
                    <option value="security">Seguridad</option>
                </select>
                
                <select class="filter-select" id="statusFilter" onchange="applyFilters()">
                    <option value="all">Todos los Estados</option>
                    <option value="passed">Pas√≥</option>
                    <option value="failed">Fall√≥</option>
                    <option value="pending">Pendiente</option>
                    <option value="not-executed">No Ejecutado</option>
                </select>
                
                <input type="text" class="filter-select" id="searchFilter" placeholder="Buscar por t√≠tulo o ID..." onkeyup="applyFilters()">
            </div>
        </div>

        <!-- Test Cases List -->
        <div class="test-list">
            <div class="list-title">üìã Casos de Prueba Registrados</div>
            
            <div class="test-item high" data-module="LOGIN" data-priority="high" data-type="functional" data-status="not-executed">
                <div class="test-header">
                    <span class="test-id">CP-LOGIN-001</span>
                    <div class="test-meta">
                        <span class="priority-badge priority-high">Alta</span>
                        <span class="type-badge type-functional">Funcional</span>
                        <span class="status-badge status-not-executed">No Ejecutado</span>
                    </div>
                </div>
                <div class="test-title">Verificar el inicio de sesi√≥n exitoso con credenciales v√°lidas</div>
                <div class="test-module">Autenticaci√≥n de Usuario ‚Ä¢ <a href="#" class="requirement-link">REQ-005</a></div>
            </div>
            
            <div class="test-item medium" data-module="REG" data-priority="medium" data-type="functional" data-status="passed">
                <div class="test-header">
                    <span class="test-id">CP-REG-001</span>
                    <div class="test-meta">
                        <span class="priority-badge priority-medium">Media</span>
                        <span class="type-badge type-functional">Funcional</span>
                        <span class="status-badge status-passed">Pas√≥</span>
                    </div>
                </div>
                <div class="test-title">Validar registro de usuario con datos correctos</div>
                <div class="test-module">Registro de Usuario ‚Ä¢ <a href="#" class="requirement-link">REQ-012</a></div>
            </div>
            
            <div class="test-item high" data-module="CART" data-priority="high" data-type="functional" data-status="failed">
                <div class="test-header">
                    <span class="test-id">CP-CART-003</span>
                    <div class="test-meta">
                        <span class="priority-badge priority-high">Alta</span>
                        <span class="type-badge type-functional">Funcional</span>
                        <span class="status-badge status-failed">Fall√≥</span>
                    </div>
                </div>
                <div class="test-title">Verificar c√°lculo correcto del total del carrito</div>
                <div class="test-module">Carrito de Compras ‚Ä¢ <a href="#" class="requirement-link">REQ-025</a></div>
            </div>
        </div>
    </div>

    <script>
        let testCounter = 1;
        let currentModule = 'LOGIN';

        // Templates
        const templates = {
            login: {
                title: "Verificar el inicio de sesi√≥n exitoso con credenciales v√°lidas",
                module: "LOGIN",
                requirement: "REQ-005",
                preconditions: "- El usuario 'testuser' debe existir en la base de datos y estar activo.\n- El sistema debe estar en la p√°gina de login.\n- La base de datos debe estar disponible y funcionando correctamente.",
                steps: [
                    "Ingresar el nombre de usuario en el campo 'Usuario'",
                    "Ingresar la contrase√±a en el campo 'Contrase√±a'",
                    "Hacer clic en el bot√≥n 'Ingresar'"
                ],
                expectedResult: "El sistema debe redirigir al usuario al Dashboard principal. Se debe mostrar el nombre de usuario 'testuser' en la esquina superior derecha. Debe aparecer un mensaje de bienvenida: 'Bienvenido, testuser'.",
                testData: [
                    {field: "Usuario", value: "testuser", description: "Usuario v√°lido existente"},
                    {field: "Contrase√±a", value: "Password123", description: "Contrase√±a correcta"}
                ]
            },
            form: {
                title: "Validar campos obligatorios en formulario de registro",
                module: "REG",
                requirement: "REQ-010",
                preconditions: "- El sistema debe estar en la p√°gina de registro.\n- La base de datos debe estar disponible.",
                steps: [
                    "Navegar a la p√°gina de registro",
                    "Dejar campos obligatorios vac√≠os",
                    "Hacer clic en el bot√≥n 'Registrar'"
                ],
                expectedResult: "El sistema debe mostrar mensajes de error para cada campo obligatorio vac√≠o. No debe permitir el env√≠o del formulario.",
                testData: [
                    {field: "Nombre", value: "", description: "Campo vac√≠o"},
                    {field: "Email", value: "", description: "Campo vac√≠o"}
                ]
            },
            navigation: {
                title: "Verificar navegaci√≥n correcta entre p√°ginas principales",
                module: "NAV",
                requirement: "REQ-001",
                preconditions: "- El usuario debe estar autenticado.\n- Todas las p√°ginas principales deben estar disponibles.",
                steps: [
                    "Hacer clic en el men√∫ 'Inicio'",
                    "Hacer clic en el men√∫ 'Productos'",
                    "Hacer clic en el men√∫ 'Perfil'"
                ],
                expectedResult: "Cada clic debe cargar la p√°gina correspondiente correctamente. La URL debe cambiar apropiadamente.",
                testData: []
            },
            api: {
                title: "Verificar respuesta correcta de API de autenticaci√≥n",
                module: "API",
                requirement: "REQ-100",
                preconditions: "- El servicio de API debe estar disponible.\n- Credenciales de prueba deben estar configuradas.",
                steps: [
                    "Enviar petici√≥n POST a /api/auth/login",
                    "Incluir credenciales v√°lidas en el body",
                    "Verificar c√≥digo de respuesta HTTP"
                ],
                expectedResult: "La API debe retornar c√≥digo 200 y un token de autenticaci√≥n v√°lido en formato JSON.",
                testData: [
                    {field: "username", value: "testapi", description: "Usuario de API"},
                    {field: "password", value: "ApiPass123", description: "Contrase√±a de API"}
                ]
            }
        };

        // Load template
        function loadTemplate(templateName) {
            const template = templates[templateName];
            if (template) {
                document.getElementById('title').value = template.title;
                document.getElementById('module').value = template.module;
                document.getElementById('requirement').value = template.requirement;
                document.getElementById('preconditions').value = template.preconditions;
                document.getElementById('expectedResult').value = template.expectedResult;
                
                // Clear and populate steps
                const stepsContainer = document.getElementById('stepsContainer');
                stepsContainer.innerHTML = '';
                template.steps.forEach((step, index) => {
                    addTestStep(step, index + 1);
                });
                
                // Clear and populate test data
                const tbody = document.querySelector('#testDataTable tbody');
                tbody.innerHTML = '';
                template.testData.forEach(data => {
                    addDataRow(data.field, data.value, data.description);
                });
                
                updateTestId();
                showNotification(`Plantilla "${templateName}" cargada exitosamente`, 'success');
            }
        }

        // Generate test ID based on module
        function updateTestId() {
            const module = document.getElementById('module').value;
            currentModule = module;
            generateTestId();
        }

        function generateTestId() {
            testCounter++;
            const newId = `CP-${currentModule}-${String(testCounter).padStart(3, '0')}`;
            document.getElementById('testId').value = newId;
        }

        // Test steps management
        function addTestStep(stepText = '', stepNumber = null) {
            const stepsContainer = document.getElementById('stepsContainer');
            const stepCount = stepsContainer.children.length + 1;
            const actualStepNumber = stepNumber || stepCount;
            
            const stepItem = document.createElement('div');
            stepItem.className = 'step-item';
            stepItem.innerHTML = `
                <div class="step-number">${actualStepNumber}</div>
                <div class="step-content">
                    <input type="text" class="step-input" value="${stepText}" placeholder="Descripci√≥n del paso">
                    <button class="step-btn fail" onclick="removeStep(this)" style="margin-left: 10px; margin-top: 5px;">√ó</button>
                </div>
            `;
            
            stepsContainer.appendChild(stepItem);
        }

        function removeStep(button) {
            const stepItem = button.closest('.step-item');
            stepItem.remove();
            renumberSteps();
        }

        function renumberSteps() {
            const steps = document.querySelectorAll('.step-item');
            steps.forEach((step, index) => {
                step.querySelector('.step-number').textContent = index + 1;
            });
        }

        // Test data management
        function addDataRow(field = '', value = '', description = '') {
            const tbody = document.querySelector('#testDataTable tbody');
            const row = document.createElement('tr');
            row.innerHTML = `
                <td><input type="text" value="${field}" placeholder="Campo" style="border: none; background: transparent; width: 100%;"></td>
                <td><input type="text" value="${value}" placeholder="Valor" style="border: none; background: transparent; width: 100%;"></td>
                <td><input type="text" value="${description}" placeholder="Descripci√≥n" style="border: none; background: transparent; width: 100%;"></td>
                <td><button class="step-btn fail" onclick="removeDataRow(this)">√ó</button></td>
            `;
            tbody.appendChild(row);
        }

        function removeDataRow(button) {
            const row = button.closest('tr');
            row.remove();
        }

        // Form actions
        function saveTestCase() {
            const formData = collectFormData();
            
            if (validateForm(formData)) {
                showNotification('Caso de prueba guardado exitosamente', 'success');
                addTestToList(formData);
                
                setTimeout(() => {
                    clearForm();
                    generateTestId();
                }, 1000);
            }
        }

        function collectFormData() {
            const steps = Array.from(document.querySelectorAll('.step-input')).map(input => input.value);
            const testData = Array.from(document.querySelectorAll('#testDataTable tbody tr')).map(row => {
                const inputs = row.querySelectorAll('input');
                return {
                    field: inputs[0].value,
                    value: inputs[1].value,
                    description: inputs[2].value
                };
            });
            
            return {
                id: document.getElementById('testId').value,
                title: document.getElementById('title').value,
                module: document.getElementById('module').value,
                requirement: document.getElementById('requirement').value,
                priority: document.getElementById('priority').value,
                testType: document.getElementById('testType').value,
                status: document.getElementById('status').value,
                preconditions: document.getElementById('preconditions').value,
                steps: steps,
                testData: testData,
                expectedResult: document.getElementById('expectedResult').value,
                actualResult: document.getElementById('actualResult').value,
                observations: document.getElementById('observations').value,
                executedBy: document.getElementById('executedBy').value,
                executionDate: document.getElementById('executionDate').value
            };
        }

        function validateForm(data) {
            const required = ['title', 'module', 'preconditions', 'expectedResult'];
            const missing = required.filter(field => !data[field] || data[field].trim() === '');
            
            if (missing.length > 0) {
                showNotification(`Campos requeridos faltantes: ${missing.join(', ')}`, 'error');
                return false;
            }
            
            if (data.steps.length === 0 || data.steps.every(step => !step.trim())) {
                showNotification('Debe agregar al menos un paso de prueba', 'error');
                return false;
            }
            
            return true;
        }

        function addTestToList(data) {
            const testList = document.querySelector('.test-list');
            const testItem = document.createElement('div');
            testItem.className = `test-item ${data.priority}`;
            testItem.setAttribute('data-module', data.module);
            testItem.setAttribute('data-priority', data.priority);
            testItem.setAttribute('data-type', data.testType);
            testItem.setAttribute('data-status', data.status);
            
            const moduleName = document.querySelector(`#module option[value="${data.module}"]`).textContent;
            
            testItem.innerHTML = `
                <div class="test-header">
                    <span class="test-id">${data.id}</span>
                    <div class="test-meta">
                        <span class="priority-badge priority-${data.priority}">${data.priority.charAt(0).toUpperCase() + data.priority.slice(1)}</span>
                        <span class="type-badge type-${data.testType}">${data.testType.charAt(0).toUpperCase() + data.testType.slice(1)}</span>
                        <span class="status-badge status-${data.status}">${data.status.replace('-', ' ').replace(/\b\w/g, l => l.toUpperCase())}</span>
                    </div>
                </div>
                <div class="test-title">${data.title}</div>
                <div class="test-module">${moduleName} ‚Ä¢ <a href="#" class="requirement-link">${data.requirement}</a></div>
            `;
            
            const firstTestItem = testList.querySelector('.test-item');
            if (firstTestItem) {
                testList.insertBefore(testItem, firstTestItem);
            } else {
                testList.appendChild(testItem);
            }
        }

        // Test execution
        function executeTest() {
            const formData = collectFormData();
            
            if (!validateForm(formData)) {
                return;
            }
            
            document.getElementById('executingTestId').textContent = formData.id;
            const executionSteps = document.getElementById('executionSteps');
            executionSteps.innerHTML = '';
            
            formData.steps.forEach((step, index) => {
                const stepDiv = document.createElement('div');
                stepDiv.className = 'execution-step';
                stepDiv.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <strong>Paso ${index + 1}:</strong> ${step}
                        </div>
                        <div class="step-controls">
                            <button class="step-btn pass" onclick="markStep(this, 'passed')">‚úì</button>
                            <button class="step-btn fail" onclick="markStep(this, 'failed')">‚úó</button>
                        </div>
                    </div>
                    <textarea placeholder="Observaciones del paso..." style="width: 100%; margin-top: 10px; padding: 8px; border: 1px solid #e2e8f0; border-radius: 5px;"></textarea>
                `;
                executionSteps.appendChild(stepDiv);
            });
            
            document.getElementById('executionPanel').classList.add('active');
            document.querySelector('.test-form').style.display = 'none';
            
            showNotification('Iniciando ejecuci√≥n de prueba', 'info');
        }

        function markStep(button, result) {
            const step = button.closest('.execution-step');
            step.classList.remove('passed', 'failed', 'current');
            step.classList.add(result);
        }

        function completeExecution(finalResult) {
            const observations = Array.from(document.querySelectorAll('#executionSteps textarea'))
                .map(textarea => textarea.value)
                .filter(obs => obs.trim())
                .join('\n');
            
            document.getElementById('status').value = finalResult;
            document.getElementById('actualResult').value = `Resultado de ejecuci√≥n: ${finalResult}`;
            document.getElementById('observations').value = observations;
            document.getElementById('executionDate').value = new Date().toISOString().split('T')[0];
            
            cancelExecution();
            showNotification(`Prueba marcada como: ${finalResult}`, finalResult === 'passed' ? 'success' : 'error');
        }

        function cancelExecution() {
            document.getElementById('executionPanel').classList.remove('active');
            document.querySelector('.test-form').style.display = 'block';
        }

        // Other functions
        function previewTest() {
            const formData = collectFormData();
            
            const previewWindow = window.open('', '_blank', 'width=800,height=600');
            previewWindow.document.write(`
                <html>
                <head>
                    <title>Vista Previa - ${formData.id}</title>
                    <style>
                        body { font-family: Arial, sans-serif; padding: 20px; line-height: 1.6; }
                        .header { background: #f0f0f0; padding: 15px; border-radius: 5px; margin-bottom: 20px; }
                        .section { margin: 20px 0; }
                        .label { font-weight: bold; color: #333; }
                        .value { margin-bottom: 10px; }
                        .steps { counter-reset: step; }
                        .steps li { counter-increment: step; margin: 5px 0; }
                    </style>
                </head>
                <body>
                    <div class="header">
                        <h1>üß™ ${formData.title}</h1>
                        <p><strong>ID:</strong> ${formData.id} | <strong>M√≥dulo:</strong> ${formData.module} | <strong>Requisito:</strong> ${formData.requirement}</p>
                    </div>
                    
                    <div class="section">
                        <div class="label">Precondiciones:</div>
                        <div class="value">${formData.preconditions.replace(/\n/g, '<br>')}</div>
                    </div>
                    
                    <div class="section">
                        <div class="label">Pasos de la Prueba:</div>
                        <ol class="steps">
                            ${formData.steps.map(step => `<li>${step}</li>`).join('')}
                        </ol>
                    </div>
                    
                    <div class="section">
                        <div class="label">Resultado Esperado:</div>
                        <div class="value">${formData.expectedResult}</div>
                    </div>
                </body>
                </html>
            `);
        }

        function clearForm() {
            document.getElementById('title').value = '';
            document.getElementById('requirement').value = '';
            document.getElementById('preconditions').value = '';
            document.getElementById('expectedResult').value = '';
            document.getElementById('actualResult').value = '';
            document.getElementById('observations').value = '';
            document.getElementById('executedBy').value = '';
            document.getElementById('executionDate').value = '';
            
            document.getElementById('stepsContainer').innerHTML = '';
            document.querySelector('#testDataTable tbody').innerHTML = '';
            
            // Reset selects
            document.getElementById('priority').selectedIndex = 0;
            document.getElementById('testType').selectedIndex = 0;
            document.getElementById('status').selectedIndex = 0;
        }

        function cloneTestCase() {
            const formData = collectFormData();
            generateTestId();
            document.getElementById('title').value = formData.title + ' (Copia)';
            showNotification('Caso de prueba clonado', 'success');
        }

        // Filters
        function applyFilters() {
            const moduleFilter = document.getElementById('moduleFilter').value;
            const priorityFilter = document.getElementById('priorityFilter').value;
            const typeFilter = document.getElementById('typeFilter').value;
            const statusFilter = document.getElementById('statusFilter').value;
            const searchFilter = document.getElementById('searchFilter').value.toLowerCase();
            
            const testItems = document.querySelectorAll('.test-item');
            
            testItems.forEach(item => {
                let show = true;
                
                if (moduleFilter !== 'all' && item.getAttribute('data-module') !== moduleFilter) {
                    show = false;
                }
                
                if (priorityFilter !== 'all' && item.getAttribute('data-priority') !== priorityFilter) {
                    show = false;
                }
                
                if (typeFilter !== 'all' && item.getAttribute('data-type') !== typeFilter) {
                    show = false;
                }
                
                if (statusFilter !== 'all' && item.getAttribute('data-status') !== statusFilter) {
                    show = false;
                }
                
                if (searchFilter && !item.textContent.toLowerCase().includes(searchFilter)) {
                    show = false;
                }
                
                item.style.display = show ? 'block' : 'none';
            });
        }

        function exportToPDF() {
            showNotification('Generando PDF... Descarga iniciar√° en breve', 'info');
            setTimeout(() => {
                showNotification('PDF generado exitosamente', 'success');
            }, 2000);
        }

        // Notification system
        function showNotification(message, type) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 20px;
                border-radius: 10px;
                color: white;
                font-weight: bold;
                z-index: 1000;
                animation: slideIn 0.3s ease;
                max-width: 300px;
            `;
            
            switch(type) {
                case 'success':
                    notification.style.background = 'linear-gradient(135deg, #48bb78, #38a169)';
                    break;
                case 'error':
                    notification.style.background = 'linear-gradient(135deg, #e53e3e, #c53030)';
                    break;
                case 'info':
                    notification.style.background = 'linear-gradient(135deg, #667eea, #764ba2)';
                    break;
            }
            
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => {
                    if (document.body.contains(notification)) {
                        document.body.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }

        // Add CSS animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            generateTestId();
            
            // Add initial steps
            addTestStep("Ingresar el nombre de usuario en el campo 'Usuario'", 1);
            addTestStep("Ingresar la contrase√±a en el campo 'Contrase√±a'", 2);
            addTestStep("Hacer clic en el bot√≥n 'Ingresar'", 3);
            
            // Add initial test data
            addDataRow("Usuario", "testuser", "Usuario v√°lido existente");
            addDataRow("Contrase√±a", "Password123", "Contrase√±a correcta");
        });

        // Add click animations
        document.addEventListener('click', function(e) {
            if (e.target.tagName === 'BUTTON') {
                e.target.style.transform = 'scale(0.95)';
                setTimeout(() => {
                    e.target.style.transform = '';
                }, 150);
            }
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97a8d585d07b2b85',t:'MTc1NzEwNzg5Mi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
