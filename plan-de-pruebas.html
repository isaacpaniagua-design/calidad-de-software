<!doctype html>
<html lang="es">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Plan de Pruebas IEEE 829</title>
  <script src="/_sdk/data_sdk.js"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
        body {
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .ieee-header {
            background: linear-gradient(135deg, #1e40af 0%, #3b82f6 50%, #60a5fa 100%);
            border-bottom: 4px solid #1d4ed8;
        }
        .section-card {
            transition: all 0.2s ease;
            border-left: 4px solid #e5e7eb;
        }
        .section-card.draft {
            border-left-color: #f59e0b;
        }
        .section-card.review {
            border-left-color: #3b82f6;
        }
        .section-card.approved {
            border-left-color: #10b981;
        }
        .section-card:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .formal-section {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
        }
        .ieee-standard {
            background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
            border: 2px solid #cbd5e1;
        }
        .loading-spinner {
            border: 2px solid #f3f4f6;
            border-top: 2px solid #1e40af;
            border-radius: 50%;
            width: 16px;
            height: 16px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .status-badge {
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            padding: 4px 8px;
            border-radius: 4px;
        }
        .status-draft {
            background: #fef3c7;
            color: #d97706;
        }
        .status-review {
            background: #dbeafe;
            color: #1d4ed8;
        }
        .status-approved {
            background: #d1fae5;
            color: #065f46;
        }
        .formal-button {
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-size: 13px;
            border: 1px solid transparent;
            transition: all 0.2s ease;
        }
        .formal-input {
            border: 1px solid #d1d5db;
            font-size: 14px;
            transition: border-color 0.2s ease;
        }
        .formal-input:focus {
            border-color: #1e40af;
            box-shadow: 0 0 0 3px rgba(30, 64, 175, 0.1);
        }
        .section-template {
            background: #f0f9ff;
            border: 1px solid #bae6fd;
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
 </head>
 <body class="min-h-full bg-gray-50"><!-- IEEE 829 Header -->
  <header class="ieee-header text-white py-8 mb-8">
   <div class="container mx-auto px-6">
    <div class="text-center">
     <div class="flex justify-center items-center gap-3 mb-2"><span class="text-3xl">üìã</span>
      <h1 class="text-4xl font-bold">Plan de Pruebas IEEE 829</h1>
     </div>
     <div class="flex justify-center items-center gap-6 text-lg mb-4 opacity-90"><span>Proyecto: <span id="project-name-display" class="font-semibold cursor-pointer hover:bg-blue-600 px-2 py-1 rounded transition-colors" title="Click para editar">Sistema de Gesti√≥n</span> <input type="text" id="project-name-input" class="font-semibold bg-blue-600 border border-blue-400 rounded px-2 py-1 text-white placeholder-blue-200 hidden" placeholder="Nombre del Proyecto"> </span> <span class="text-blue-200">|</span> <span>Versi√≥n: <span id="version-display" class="font-semibold cursor-pointer hover:bg-blue-600 px-2 py-1 rounded transition-colors" title="Click para editar">v1.0.0</span> <input type="text" id="version-input" class="font-semibold bg-blue-600 border border-blue-400 rounded px-2 py-1 text-white placeholder-blue-200 hidden" placeholder="v1.0.0"> </span> <span class="text-blue-200">|</span> <span>QA Manager: <span id="test-manager-display" class="font-semibold cursor-pointer hover:bg-blue-600 px-2 py-1 rounded transition-colors" title="Click para editar">Responsable de Pruebas</span> <input type="text" id="test-manager-input" class="font-semibold bg-blue-600 border border-blue-400 rounded px-2 py-1 text-white placeholder-blue-200 hidden" placeholder="Nombre del QA Manager"> </span>
     </div>
     <div class="text-blue-100 mb-4"><span id="organization" class="font-medium">Organizaci√≥n</span> ‚Ä¢ <span>Fecha: <span id="current-date"></span></span>
     </div>
     <p class="text-blue-100 max-w-4xl mx-auto text-lg leading-relaxed">Documento maestro que define la estrategia integral de pruebas siguiendo el est√°ndar IEEE 829. Define alcance, tipos de pruebas, entornos, criterios de entrada/salida y recursos necesarios.</p>
    </div>
   </div>
  </header>
  <main class="container mx-auto px-6 pb-12"><!-- Quick Templates Section -->
   <section class="section-template rounded-lg p-6 mb-8">
    <div class="border-b border-blue-200 pb-4 mb-6">
     <h2 class="text-2xl font-semibold text-gray-800">Plantillas R√°pidas IEEE 829</h2>
     <p class="text-gray-600 mt-1">Agregue secciones est√°ndar con contenido predefinido</p>
    </div>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"><button class="template-btn bg-blue-600 hover:bg-blue-700 text-white p-4 rounded-lg text-left transition-colors" data-template="scope">
      <div class="font-semibold mb-1">
       1. Alcance de Pruebas
      </div>
      <div class="text-sm opacity-90">
       Qu√© se probar√° y qu√© no
      </div></button> <button class="template-btn bg-green-600 hover:bg-green-700 text-white p-4 rounded-lg text-left transition-colors" data-template="approach">
      <div class="font-semibold mb-1">
       2. Enfoque de Pruebas
      </div>
      <div class="text-sm opacity-90">
       Tipos y t√©cnicas de pruebas
      </div></button> <button class="template-btn bg-purple-600 hover:bg-purple-700 text-white p-4 rounded-lg text-left transition-colors" data-template="criteria">
      <div class="font-semibold mb-1">
       3. Criterios Entrada/Salida
      </div>
      <div class="text-sm opacity-90">
       Cu√°ndo empezar y terminar
      </div></button> <button class="template-btn bg-orange-600 hover:bg-orange-700 text-white p-4 rounded-lg text-left transition-colors" data-template="environment">
      <div class="font-semibold mb-1">
       4. Entorno de Pruebas
      </div>
      <div class="text-sm opacity-90">
       Hardware, software, datos
      </div></button> <button class="template-btn bg-red-600 hover:bg-red-700 text-white p-4 rounded-lg text-left transition-colors" data-template="resources">
      <div class="font-semibold mb-1">
       5. Recursos y Cronograma
      </div>
      <div class="text-sm opacity-90">
       Personal, herramientas, tiempo
      </div></button> <button class="template-btn bg-indigo-600 hover:bg-indigo-700 text-white p-4 rounded-lg text-left transition-colors" data-template="risks">
      <div class="font-semibold mb-1">
       6. Riesgos y Contingencias
      </div>
      <div class="text-sm opacity-90">
       Identificaci√≥n y mitigaci√≥n
      </div></button>
    </div>
   </section><!-- Custom Section Form -->
   <section class="formal-section rounded-lg p-8 mb-8">
    <div class="border-b border-gray-200 pb-4 mb-6">
     <h2 class="text-2xl font-semibold text-gray-800">Agregar Secci√≥n Personalizada</h2>
     <p class="text-gray-600 mt-1">Defina secciones adicionales espec√≠ficas para su proyecto</p>
    </div>
    <form id="section-form" class="grid grid-cols-1 lg:grid-cols-2 gap-6">
     <div><label for="section-title" class="block text-sm font-semibold text-gray-700 mb-2">T√≠tulo de la Secci√≥n *</label> <input type="text" id="section-title" class="formal-input w-full px-4 py-3 rounded-md focus:outline-none" placeholder="Ej. Estrategia de Automatizaci√≥n" required>
     </div>
     <div><label for="section-type" class="block text-sm font-semibold text-gray-700 mb-2">Tipo de Secci√≥n *</label> <select id="section-type" class="formal-input w-full px-4 py-3 rounded-md focus:outline-none" required> <option value="">Seleccionar tipo</option> <option value="scope">Alcance</option> <option value="approach">Enfoque</option> <option value="criteria">Criterios</option> <option value="environment">Entorno</option> <option value="resources">Recursos</option> <option value="risks">Riesgos</option> <option value="custom">Personalizada</option> </select>
     </div>
     <div class="lg:col-span-2"><label for="section-content" class="block text-sm font-semibold text-gray-700 mb-2">Contenido *</label> <textarea id="section-content" rows="6" class="formal-input w-full px-4 py-3 rounded-md focus:outline-none" placeholder="Describa el contenido de esta secci√≥n del plan de pruebas..." required></textarea>
     </div>
     <div><label for="section-priority" class="block text-sm font-semibold text-gray-700 mb-2">Prioridad</label> <select id="section-priority" class="formal-input w-full px-4 py-3 rounded-md focus:outline-none"> <option value="1">Alta</option> <option value="2" selected>Media</option> <option value="3">Baja</option> </select>
     </div>
     <div class="flex items-end"><button type="submit" id="add-section-btn" class="formal-button bg-blue-700 hover:bg-blue-800 text-white px-8 py-3 rounded-md flex items-center gap-3"> <span>Agregar Secci√≥n</span>
       <div id="add-loading" class="loading-spinner hidden"></div></button>
     </div>
    </form>
   </section><!-- Test Plan Sections -->
   <section id="sections-container" class="mb-8">
    <div class="border-b border-gray-200 pb-4 mb-8">
     <h2 class="text-2xl font-semibold text-gray-800">Secciones del Plan de Pruebas</h2>
     <p class="text-gray-600 mt-1">Contenido estructurado seg√∫n IEEE 829</p>
    </div>
    <div id="sections-list" class="space-y-6"><!-- Sections will be rendered here -->
    </div>
    <div id="no-sections-message" class="formal-section rounded-lg text-center py-16 text-gray-500">
     <div class="text-5xl mb-4 text-gray-400">
      üìã
     </div>
     <h3 class="text-xl font-medium text-gray-700 mb-2">Plan de Pruebas Vac√≠o</h3>
     <p class="text-gray-600">Use las plantillas r√°pidas o agregue secciones personalizadas para comenzar</p>
    </div>
   </section><!-- IEEE 829 Guidelines -->
   <section class="ieee-standard rounded-lg p-8 mb-8">
    <div class="border-b border-slate-300 pb-4 mb-6">
     <h2 class="text-2xl font-semibold text-gray-800">Gu√≠a IEEE 829 - Estructura Est√°ndar</h2>
     <p class="text-gray-700 mt-1">Elementos clave que debe contener un plan de pruebas profesional</p>
    </div>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
     <div class="bg-white rounded-lg p-6 border border-gray-200 shadow-sm">
      <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2"><span class="w-8 h-8 bg-blue-600 text-white rounded-lg flex items-center justify-center text-sm">1</span> Identificaci√≥n del Plan</h3>
      <ul class="text-sm text-gray-600 space-y-2">
       <li class="flex items-start"><span class="text-blue-600 mr-2">‚Ä¢</span>Nombre √∫nico del plan</li>
       <li class="flex items-start"><span class="text-blue-600 mr-2">‚Ä¢</span>Versi√≥n y fecha</li>
       <li class="flex items-start"><span class="text-blue-600 mr-2">‚Ä¢</span>Responsables y aprobadores</li>
      </ul>
     </div>
     <div class="bg-white rounded-lg p-6 border border-gray-200 shadow-sm">
      <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2"><span class="w-8 h-8 bg-green-600 text-white rounded-lg flex items-center justify-center text-sm">2</span> Elementos de Prueba</h3>
      <ul class="text-sm text-gray-600 space-y-2">
       <li class="flex items-start"><span class="text-green-600 mr-2">‚Ä¢</span>M√≥dulos a probar</li>
       <li class="flex items-start"><span class="text-green-600 mr-2">‚Ä¢</span>Funcionalidades incluidas</li>
       <li class="flex items-start"><span class="text-green-600 mr-2">‚Ä¢</span>Exclusiones expl√≠citas</li>
      </ul>
     </div>
     <div class="bg-white rounded-lg p-6 border border-gray-200 shadow-sm">
      <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2"><span class="w-8 h-8 bg-purple-600 text-white rounded-lg flex items-center justify-center text-sm">3</span> Caracter√≠sticas a Probar</h3>
      <ul class="text-sm text-gray-600 space-y-2">
       <li class="flex items-start"><span class="text-purple-600 mr-2">‚Ä¢</span>Funcionalidad</li>
       <li class="flex items-start"><span class="text-purple-600 mr-2">‚Ä¢</span>Rendimiento</li>
       <li class="flex items-start"><span class="text-purple-600 mr-2">‚Ä¢</span>Usabilidad y seguridad</li>
      </ul>
     </div>
     <div class="bg-white rounded-lg p-6 border border-gray-200 shadow-sm">
      <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2"><span class="w-8 h-8 bg-orange-600 text-white rounded-lg flex items-center justify-center text-sm">4</span> Enfoque de Pruebas</h3>
      <ul class="text-sm text-gray-600 space-y-2">
       <li class="flex items-start"><span class="text-orange-600 mr-2">‚Ä¢</span>Estrategia general</li>
       <li class="flex items-start"><span class="text-orange-600 mr-2">‚Ä¢</span>T√©cnicas espec√≠ficas</li>
       <li class="flex items-start"><span class="text-orange-600 mr-2">‚Ä¢</span>Herramientas a utilizar</li>
      </ul>
     </div>
    </div>
   </section><!-- Export and Actions -->
   <section class="formal-section rounded-lg p-8">
    <div class="border-b border-gray-200 pb-4 mb-6">
     <h2 class="text-2xl font-semibold text-gray-800">Generaci√≥n de Documentos</h2>
     <p class="text-gray-600 mt-1">Exporte el plan de pruebas en formatos est√°ndar</p>
    </div>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4"><button id="export-ieee" class="formal-button bg-blue-700 hover:bg-blue-800 text-white px-6 py-4 rounded-md flex items-center justify-center gap-3 border border-blue-800"> <span class="text-xl">üìÑ</span>
      <div class="text-left">
       <div class="font-semibold">
        Plan IEEE 829
       </div>
       <div class="text-xs opacity-90">
        Formato est√°ndar
       </div>
      </div></button> <button id="export-summary" class="formal-button bg-green-700 hover:bg-green-800 text-white px-6 py-4 rounded-md flex items-center justify-center gap-3 border border-green-800"> <span class="text-xl">üìã</span>
      <div class="text-left">
       <div class="font-semibold">
        Resumen Ejecutivo
       </div>
       <div class="text-xs opacity-90">
        Para stakeholders
       </div>
      </div></button> <button id="clear-all" class="formal-button bg-red-700 hover:bg-red-800 text-white px-6 py-4 rounded-md flex items-center justify-center gap-3 border border-red-800"> <span class="text-xl">üóëÔ∏è</span>
      <div class="text-left">
       <div class="font-semibold">
        Limpiar Plan
       </div>
       <div class="text-xs opacity-90">
        Reiniciar documento
       </div>
      </div></button>
    </div>
   </section>
  </main>
  <script>
        // Configuration and state
        const defaultConfig = {
            project_name: "Sistema de Gesti√≥n",
            version: "v1.0.0",
            test_manager: "Responsable de Pruebas",
            organization: "Organizaci√≥n"
        };

        let sections = [];
        let isInitialized = false;

        // Template definitions
        const templates = {
            scope: {
                title: "Alcance de Pruebas",
                content: `ELEMENTOS A PROBAR:
‚Ä¢ M√≥dulo de Login y Autenticaci√≥n
‚Ä¢ M√≥dulo de Gesti√≥n de Usuarios
‚Ä¢ M√≥dulo de Reportes y Dashboard
‚Ä¢ APIs de integraci√≥n con sistemas externos

ELEMENTOS EXCLUIDOS:
‚Ä¢ M√≥dulo de Administraci√≥n (fuera del sprint actual)
‚Ä¢ Funcionalidades de terceros (PayPal, Google Maps)
‚Ä¢ Pruebas de migraci√≥n de datos (fase posterior)

CARACTER√çSTICAS A PROBAR:
‚Ä¢ Funcionalidad: Todas las funciones cr√≠ticas del negocio
‚Ä¢ Usabilidad: Navegaci√≥n intuitiva y experiencia de usuario
‚Ä¢ Rendimiento: Tiempos de respuesta bajo carga normal
‚Ä¢ Seguridad: Autenticaci√≥n, autorizaci√≥n y protecci√≥n de datos
‚Ä¢ Compatibilidad: Navegadores Chrome, Firefox, Safari, Edge`
            },
            approach: {
                title: "Enfoque de Pruebas",
                content: `ESTRATEGIA GENERAL:
‚Ä¢ Enfoque basado en riesgos priorizando funcionalidades cr√≠ticas
‚Ä¢ Combinaci√≥n de pruebas manuales y automatizadas
‚Ä¢ Pruebas iterativas siguiendo metodolog√≠a √°gil

TIPOS DE PRUEBAS:
‚Ä¢ Pruebas Funcionales: Validaci√≥n de requisitos funcionales
‚Ä¢ Pruebas de Integraci√≥n: Verificaci√≥n de interfaces entre m√≥dulos
‚Ä¢ Pruebas de Sistema: Validaci√≥n del sistema completo
‚Ä¢ Pruebas de Aceptaci√≥n: Validaci√≥n con usuarios finales
‚Ä¢ Pruebas de Regresi√≥n: Verificaci√≥n de funcionalidades existentes

T√âCNICAS ESPEC√çFICAS:
‚Ä¢ Partici√≥n de equivalencia y an√°lisis de valores l√≠mite
‚Ä¢ Pruebas de casos de uso y escenarios de negocio
‚Ä¢ Pruebas exploratorias para descubrimiento de defectos
‚Ä¢ Pruebas de carga para validar rendimiento`
            },
            criteria: {
                title: "Criterios de Entrada y Salida",
                content: `CRITERIOS DE ENTRADA:
‚Ä¢ Build estable desplegado en ambiente de QA
‚Ä¢ Casos de prueba revisados y aprobados
‚Ä¢ Datos de prueba preparados y disponibles
‚Ä¢ Ambiente de pruebas configurado y operativo
‚Ä¢ Equipo de pruebas capacitado en funcionalidades

CRITERIOS DE SALIDA:
‚Ä¢ 95% de casos de prueba ejecutados exitosamente
‚Ä¢ 0 defectos cr√≠ticos pendientes
‚Ä¢ M√°ximo 2 defectos altos pendientes (con plan de resoluci√≥n)
‚Ä¢ Pruebas de regresi√≥n completadas sin fallos
‚Ä¢ Documentaci√≥n de defectos actualizada
‚Ä¢ Sign-off del Test Manager y Product Owner

CRITERIOS DE SUSPENSI√ìN:
‚Ä¢ M√°s de 5 defectos cr√≠ticos identificados
‚Ä¢ Ambiente de pruebas inestable por m√°s de 4 horas
‚Ä¢ Cambios mayores en requisitos (>30% de funcionalidad)`
            },
            environment: {
                title: "Entorno de Pruebas",
                content: `HARDWARE REQUERIDO:
‚Ä¢ Servidor de aplicaciones: 8GB RAM, 4 CPU cores
‚Ä¢ Base de datos: 16GB RAM, SSD 500GB
‚Ä¢ Estaciones de trabajo: 8GB RAM, Windows 10/11

SOFTWARE Y HERRAMIENTAS:
‚Ä¢ Sistema Operativo: Windows Server 2019, Ubuntu 20.04
‚Ä¢ Base de Datos: PostgreSQL 13.x, Redis 6.x
‚Ä¢ Navegadores: Chrome 90+, Firefox 88+, Safari 14+, Edge 90+
‚Ä¢ Herramientas de Pruebas: Selenium WebDriver, Postman, JMeter
‚Ä¢ Gesti√≥n de Defectos: Jira, TestRail

DATOS DE PRUEBA:
‚Ä¢ Base de datos de prueba con 1000 usuarios ficticios
‚Ä¢ Cat√°logo de productos con 500 items
‚Ä¢ Transacciones hist√≥ricas de 6 meses
‚Ä¢ Datos anonimizados de producci√≥n (cuando aplique)

CONFIGURACI√ìN DE RED:
‚Ä¢ Acceso a APIs externas en ambiente de sandbox
‚Ä¢ VPN configurada para acceso remoto del equipo
‚Ä¢ Firewall configurado para permitir tr√°fico de pruebas`
            },
            resources: {
                title: "Recursos y Cronograma",
                content: `EQUIPO DE PRUEBAS:
‚Ä¢ Test Manager: 1 persona (100% dedicaci√≥n)
‚Ä¢ QA Senior: 2 personas (100% dedicaci√≥n)
‚Ä¢ QA Junior: 2 personas (80% dedicaci√≥n)
‚Ä¢ Automation Engineer: 1 persona (60% dedicaci√≥n)

CRONOGRAMA DE ACTIVIDADES:
‚Ä¢ Semana 1-2: Preparaci√≥n de ambiente y casos de prueba
‚Ä¢ Semana 3-4: Ejecuci√≥n de pruebas funcionales
‚Ä¢ Semana 5: Pruebas de integraci√≥n y sistema
‚Ä¢ Semana 6: Pruebas de aceptaci√≥n y regresi√≥n
‚Ä¢ Semana 7: Cierre y documentaci√≥n

HERRAMIENTAS Y LICENCIAS:
‚Ä¢ TestRail: 5 licencias de usuario
‚Ä¢ Jira: Acceso al proyecto de QA
‚Ä¢ Selenium Grid: Configuraci√≥n en servidor dedicado
‚Ä¢ JMeter: Instalaci√≥n en estaciones de trabajo

PRESUPUESTO ESTIMADO:
‚Ä¢ Personal: $45,000 (7 semanas)
‚Ä¢ Herramientas y licencias: $2,500
‚Ä¢ Infraestructura: $1,500
‚Ä¢ Total: $49,000`
            },
            risks: {
                title: "Riesgos y Contingencias",
                content: `RIESGOS IDENTIFICADOS:

ALTO RIESGO:
‚Ä¢ Retrasos en entrega de builds por desarrollo
  Mitigaci√≥n: Buffer de 2 d√≠as en cronograma, comunicaci√≥n diaria
‚Ä¢ Cambios de requisitos durante fase de pruebas
  Mitigaci√≥n: Change control process, re-estimaci√≥n de impacto

MEDIO RIESGO:
‚Ä¢ Indisponibilidad de ambiente de pruebas
  Mitigaci√≥n: Ambiente de backup, SLA con infraestructura
‚Ä¢ Recursos clave no disponibles por enfermedad
  Mitigaci√≥n: Cross-training, documentaci√≥n detallada

BAJO RIESGO:
‚Ä¢ Problemas de rendimiento en herramientas de automatizaci√≥n
  Mitigaci√≥n: Pruebas piloto, herramientas alternativas

PLAN DE CONTINGENCIA:
‚Ä¢ Escalaci√≥n a Project Manager si riesgos altos se materializan
‚Ä¢ Re-priorizaci√≥n de casos de prueba cr√≠ticos
‚Ä¢ Extensi√≥n de cronograma con aprobaci√≥n de stakeholders
‚Ä¢ Recursos adicionales de otros proyectos si es necesario`
            }
        };

        // Data handler for SDK
        const dataHandler = {
            onDataChanged(data) {
                sections = data.sort((a, b) => a.priority - b.priority);
                renderSections();
            }
        };

        // Element SDK configuration
        const elementConfig = {
            defaultConfig,
            onConfigChange: async (config) => {
                document.getElementById('project-name-display').textContent = config.project_name || defaultConfig.project_name;
                document.getElementById('project-name-input').value = config.project_name || defaultConfig.project_name;
                document.getElementById('version-display').textContent = config.version || defaultConfig.version;
                document.getElementById('version-input').value = config.version || defaultConfig.version;
                document.getElementById('test-manager-display').textContent = config.test_manager || defaultConfig.test_manager;
                document.getElementById('test-manager-input').value = config.test_manager || defaultConfig.test_manager;
                document.getElementById('organization').textContent = config.organization || defaultConfig.organization;
            },
            mapToCapabilities: (config) => ({
                recolorables: [],
                borderables: [],
                fontEditable: undefined,
                fontSizeable: undefined
            }),
            mapToEditPanelValues: (config) => new Map([
                ["project_name", config.project_name || defaultConfig.project_name],
                ["version", config.version || defaultConfig.version],
                ["test_manager", config.test_manager || defaultConfig.test_manager],
                ["organization", config.organization || defaultConfig.organization]
            ])
        };

        // Initialize SDKs
        async function initializeApp() {
            try {
                // Set current date
                document.getElementById('current-date').textContent = new Date().toLocaleDateString();
                
                if (window.elementSdk) {
                    await window.elementSdk.init(elementConfig);
                }
                
                if (window.dataSdk) {
                    const result = await window.dataSdk.init(dataHandler);
                    if (!result.isOk) {
                        console.error("Failed to initialize data SDK");
                    }
                }
                
                isInitialized = true;
                setupEventListeners();
            } catch (error) {
                console.error("Initialization error:", error);
                setupEventListeners();
            }
        }

        // Render sections
        function renderSections() {
            const container = document.getElementById('sections-list');
            const noMessage = document.getElementById('no-sections-message');
            
            if (sections.length === 0) {
                container.innerHTML = '';
                noMessage.style.display = 'block';
                return;
            }
            
            noMessage.style.display = 'none';
            
            container.innerHTML = sections.map((section, index) => `
                <div class="section-card ${section.status} bg-white rounded-lg shadow-sm border border-gray-200 p-8">
                    <div class="flex justify-between items-start mb-6">
                        <div class="flex items-center gap-4">
                            <div class="bg-blue-700 text-white rounded-lg w-10 h-10 flex items-center justify-center font-bold text-sm">
                                ${index + 1}
                            </div>
                            <div>
                                <h3 class="text-xl font-semibold text-gray-800 mb-1">${section.title}</h3>
                                <div class="flex items-center gap-3">
                                    <span class="text-sm text-gray-600 capitalize">${section.section_type}</span>
                                    <span class="status-badge ${section.status === 'draft' ? 'status-draft' : section.status === 'review' ? 'status-review' : 'status-approved'}">
                                        ${section.status === 'draft' ? 'Borrador' : section.status === 'review' ? 'En Revisi√≥n' : 'Aprobado'}
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="flex gap-3">
                            <select class="status-select formal-input px-3 py-2 text-sm rounded-md" data-section-id="${section.__backendId}">
                                <option value="draft" ${section.status === 'draft' ? 'selected' : ''}>Borrador</option>
                                <option value="review" ${section.status === 'review' ? 'selected' : ''}>En Revisi√≥n</option>
                                <option value="approved" ${section.status === 'approved' ? 'selected' : ''}>Aprobado</option>
                            </select>
                            <button class="edit-section text-blue-600 hover:text-blue-800 hover:bg-blue-50 p-2 rounded-md transition-colors" data-section-id="${section.__backendId}">
                                ‚úèÔ∏è
                            </button>
                            <button class="delete-section text-red-600 hover:text-red-800 hover:bg-red-50 p-2 rounded-md transition-colors" data-section-id="${section.__backendId}">
                                üóëÔ∏è
                            </button>
                        </div>
                    </div>
                    
                    <div class="bg-gray-50 rounded-lg p-6">
                        <pre class="whitespace-pre-wrap text-gray-700 leading-relaxed font-sans">${section.content}</pre>
                    </div>
                </div>
            `).join('');
            
            // Add event listeners
            container.querySelectorAll('.status-select').forEach(select => {
                select.addEventListener('change', handleStatusChange);
            });
            
            container.querySelectorAll('.edit-section').forEach(button => {
                button.addEventListener('click', handleEditSection);
            });
            
            container.querySelectorAll('.delete-section').forEach(button => {
                button.addEventListener('click', handleDeleteSection);
            });
        }

        // Handle template button clicks
        function handleTemplateClick(event) {
            const templateType = event.currentTarget.dataset.template;
            const template = templates[templateType];
            
            if (template) {
                document.getElementById('section-title').value = template.title;
                document.getElementById('section-type').value = templateType;
                document.getElementById('section-content').value = template.content;
                
                // Scroll to form
                document.getElementById('section-form').scrollIntoView({ behavior: 'smooth' });
                
                showToast(`Plantilla "${template.title}" cargada`, "success");
            }
        }

        // Handle form submission
        async function handleFormSubmit(event) {
            event.preventDefault();
            
            if (sections.length >= 999) {
                showToast("L√≠mite m√°ximo de 999 secciones alcanzado", "error");
                return;
            }
            
            const sectionData = {
                id: Date.now().toString(),
                section_type: document.getElementById('section-type').value,
                title: document.getElementById('section-title').value,
                content: document.getElementById('section-content').value,
                priority: parseInt(document.getElementById('section-priority').value),
                status: 'draft',
                created_at: new Date().toISOString()
            };
            
            const addButton = document.getElementById('add-section-btn');
            const loading = document.getElementById('add-loading');
            
            addButton.disabled = true;
            loading.classList.remove('hidden');
            
            if (window.dataSdk) {
                const result = await window.dataSdk.create(sectionData);
                
                if (result.isOk) {
                    event.target.reset();
                    showToast("Secci√≥n agregada exitosamente", "success");
                } else {
                    showToast("Error al agregar la secci√≥n", "error");
                }
            } else {
                sections.push({ ...sectionData, __backendId: sectionData.id });
                renderSections();
                event.target.reset();
                showToast("Secci√≥n agregada exitosamente", "success");
            }
            
            addButton.disabled = false;
            loading.classList.add('hidden');
        }

        // Handle status change
        async function handleStatusChange(event) {
            const sectionId = event.target.dataset.sectionId;
            const newStatus = event.target.value;
            const section = sections.find(s => s.__backendId === sectionId);
            
            if (section && window.dataSdk) {
                const updatedSection = { ...section, status: newStatus };
                const result = await window.dataSdk.update(updatedSection);
                
                if (!result.isOk) {
                    event.target.value = section.status;
                    showToast("Error al actualizar el estado", "error");
                }
            }
        }

        // Handle edit section
        function handleEditSection(event) {
            const sectionId = event.target.dataset.sectionId;
            const section = sections.find(s => s.__backendId === sectionId);
            
            if (section) {
                document.getElementById('section-title').value = section.title;
                document.getElementById('section-type').value = section.section_type;
                document.getElementById('section-content').value = section.content;
                document.getElementById('section-priority').value = section.priority;
                
                document.getElementById('section-form').scrollIntoView({ behavior: 'smooth' });
                showToast("Secci√≥n cargada para edici√≥n", "info");
            }
        }

        // Handle delete section
        async function handleDeleteSection(event) {
            const sectionId = event.target.dataset.sectionId;
            const section = sections.find(s => s.__backendId === sectionId);
            
            if (section && window.dataSdk) {
                const button = event.target;
                const originalText = button.innerHTML;
                button.innerHTML = '‚ùå';
                button.style.backgroundColor = '#fee2e2';
                
                const confirmDelete = () => {
                    button.innerHTML = '‚è≥';
                    window.dataSdk.delete(section).then(result => {
                        if (!result.isOk) {
                            showToast("Error al eliminar la secci√≥n", "error");
                            button.innerHTML = originalText;
                            button.style.backgroundColor = '';
                        }
                    });
                };
                
                const cancelDelete = () => {
                    button.innerHTML = originalText;
                    button.style.backgroundColor = '';
                };
                
                const timeoutId = setTimeout(confirmDelete, 2000);
                
                const clickHandler = (e) => {
                    if (!button.contains(e.target)) {
                        clearTimeout(timeoutId);
                        cancelDelete();
                        document.removeEventListener('click', clickHandler);
                    }
                };
                
                document.addEventListener('click', clickHandler);
                
                button.onclick = (e) => {
                    e.stopPropagation();
                    clearTimeout(timeoutId);
                    confirmDelete();
                    document.removeEventListener('click', clickHandler);
                };
            }
        }

        // Export functions
        function exportIEEE() {
            const ieeeDocument = generateIEEEDocument();
            downloadText(ieeeDocument, 'plan-pruebas-ieee829.txt');
        }

        function exportSummary() {
            const summary = generateExecutiveSummary();
            downloadText(summary, 'resumen-plan-pruebas.txt');
        }

        function generateIEEEDocument() {
            const config = window.elementSdk?.config || defaultConfig;
            const currentDate = new Date().toLocaleDateString();
            
            return `
PLAN DE PRUEBAS IEEE 829
========================

1. IDENTIFICACI√ìN DEL PLAN
--------------------------
Proyecto: ${config.project_name || defaultConfig.project_name}
Versi√≥n: ${config.version || defaultConfig.version}
Organizaci√≥n: ${config.organization || defaultConfig.organization}
Test Manager: ${config.test_manager || defaultConfig.test_manager}
Fecha: ${currentDate}

2. INTRODUCCI√ìN
---------------
Este documento define la estrategia de pruebas para el proyecto ${config.project_name || defaultConfig.project_name} 
siguiendo el est√°ndar IEEE 829. Establece el alcance, enfoque, recursos y cronograma 
para las actividades de verificaci√≥n y validaci√≥n.

${sections.map((section, index) => `
${index + 3}. ${section.title.toUpperCase()}
${'-'.repeat(section.title.length + 4)}
${section.content}
`).join('')}

APROBACIONES
============
Test Manager: ${config.test_manager || defaultConfig.test_manager}
Fecha: ${currentDate}
Firma: _________________________

Project Manager: ________________________
Fecha: _____________
Firma: _________________________

Product Owner: ________________________
Fecha: _____________
Firma: _________________________

---
Documento generado autom√°ticamente
Est√°ndar: IEEE 829-2008
Total de secciones: ${sections.length}
            `.trim();
        }

        function generateExecutiveSummary() {
            const config = window.elementSdk?.config || defaultConfig;
            const currentDate = new Date().toLocaleDateString();
            
            return `
RESUMEN EJECUTIVO - PLAN DE PRUEBAS
===================================

Proyecto: ${config.project_name || defaultConfig.project_name}
Versi√≥n: ${config.version || defaultConfig.version}
Organizaci√≥n: ${config.organization || defaultConfig.organization}
Responsable: ${config.test_manager || defaultConfig.test_manager}
Fecha: ${currentDate}

RESUMEN DEL PLAN:
${sections.length > 0 ? sections.map(section => `
‚Ä¢ ${section.title}
  Estado: ${section.status === 'draft' ? 'Borrador' : section.status === 'review' ? 'En Revisi√≥n' : 'Aprobado'}
  Tipo: ${section.section_type}
`).join('') : '‚Ä¢ No hay secciones definidas a√∫n'}

ESTAD√çSTICAS:
‚Ä¢ Total de secciones: ${sections.length}
‚Ä¢ Secciones aprobadas: ${sections.filter(s => s.status === 'approved').length}
‚Ä¢ Secciones en revisi√≥n: ${sections.filter(s => s.status === 'review').length}
‚Ä¢ Secciones en borrador: ${sections.filter(s => s.status === 'draft').length}

ESTADO GENERAL:
${sections.length === 0 ? 'Plan en fase inicial - requiere definici√≥n de secciones' :
  sections.filter(s => s.status === 'approved').length === sections.length ? 'Plan completamente aprobado - listo para ejecuci√≥n' :
  sections.filter(s => s.status === 'approved').length > sections.length / 2 ? 'Plan en fase avanzada - mayor√≠a de secciones aprobadas' :
  'Plan en desarrollo - requiere revisi√≥n y aprobaci√≥n'}

PR√ìXIMOS PASOS:
${sections.filter(s => s.status === 'draft').length > 0 ? '‚Ä¢ Completar secciones en borrador' : ''}
${sections.filter(s => s.status === 'review').length > 0 ? '‚Ä¢ Aprobar secciones en revisi√≥n' : ''}
${sections.filter(s => s.status === 'approved').length === sections.length && sections.length > 0 ? '‚Ä¢ Iniciar ejecuci√≥n de pruebas seg√∫n cronograma' : ''}
            `.trim();
        }

        function downloadText(content, filename) {
            const blob = new Blob([content], { type: 'text/plain' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
        }

        async function clearAllData() {
            if (sections.length === 0) {
                showToast("No hay datos para limpiar", "info");
                return;
            }
            
            const button = document.getElementById('clear-all');
            const originalText = button.textContent;
            button.textContent = '‚ö†Ô∏è Confirmar';
            button.style.backgroundColor = '#dc2626';
            
            const confirmClear = async () => {
                button.textContent = '‚è≥ Limpiando...';
                
                if (window.dataSdk) {
                    for (const section of sections) {
                        await window.dataSdk.delete(section);
                    }
                } else {
                    sections = [];
                    renderSections();
                }
                
                showToast("Plan de pruebas reiniciado", "success");
                button.textContent = originalText;
                button.style.backgroundColor = '';
            };
            
            const cancelClear = () => {
                button.textContent = originalText;
                button.style.backgroundColor = '';
            };
            
            const timeoutId = setTimeout(confirmClear, 3000);
            
            const clickHandler = (e) => {
                if (!button.contains(e.target)) {
                    clearTimeout(timeoutId);
                    cancelClear();
                    document.removeEventListener('click', clickHandler);
                }
            };
            
            document.addEventListener('click', clickHandler);
            
            button.onclick = (e) => {
                e.stopPropagation();
                clearTimeout(timeoutId);
                confirmClear();
                document.removeEventListener('click', clickHandler);
            };
        }

        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            const bgColor = type === 'success' ? 'bg-green-500' : type === 'error' ? 'bg-red-500' : 'bg-blue-500';
            
            toast.className = `fixed top-4 right-4 ${bgColor} text-white px-6 py-3 rounded-lg shadow-lg z-50 transform transition-transform duration-300 translate-x-full`;
            toast.textContent = message;
            
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.classList.remove('translate-x-full');
            }, 100);
            
            setTimeout(() => {
                toast.classList.add('translate-x-full');
                setTimeout(() => {
                    document.body.removeChild(toast);
                }, 300);
            }, 3000);
        }

        function setupEventListeners() {
            document.getElementById('section-form').addEventListener('submit', handleFormSubmit);
            document.getElementById('export-ieee').addEventListener('click', exportIEEE);
            document.getElementById('export-summary').addEventListener('click', exportSummary);
            document.getElementById('clear-all').addEventListener('click', clearAllData);
            
            // Template buttons
            document.querySelectorAll('.template-btn').forEach(button => {
                button.addEventListener('click', handleTemplateClick);
            });
            
            // Inline editing for all fields
            setupInlineEditing();
        }

        function setupInlineEditing() {
            // Setup editing for project name
            setupFieldEditing('project-name', 'project_name', 'Nombre del proyecto actualizado');
            
            // Setup editing for version
            setupFieldEditing('version', 'version', 'Versi√≥n actualizada');
            
            // Setup editing for test manager
            setupFieldEditing('test-manager', 'test_manager', 'QA Manager actualizado');
        }
        
        function setupFieldEditing(fieldName, configKey, successMessage) {
            const display = document.getElementById(`${fieldName}-display`);
            const input = document.getElementById(`${fieldName}-input`);
            
            // Click to edit
            display.addEventListener('click', () => {
                display.classList.add('hidden');
                input.classList.remove('hidden');
                input.focus();
                input.select();
            });
            
            // Save on Enter or blur
            const saveField = async () => {
                const newValue = input.value.trim();
                if (newValue && window.elementSdk) {
                    const updateConfig = {};
                    updateConfig[configKey] = newValue;
                    await window.elementSdk.setConfig(updateConfig);
                    showToast(successMessage, "success");
                }
                input.classList.add('hidden');
                display.classList.remove('hidden');
            };
            
            // Cancel on Escape
            const cancelEdit = () => {
                const currentValue = window.elementSdk?.config?.[configKey] || defaultConfig[configKey];
                input.value = currentValue;
                input.classList.add('hidden');
                display.classList.remove('hidden');
            };
            
            input.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    saveField();
                } else if (e.key === 'Escape') {
                    e.preventDefault();
                    cancelEdit();
                }
            });
            
            input.addEventListener('blur', saveField);
        }

        // Initialize the application
        initializeApp();
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9965002525354711',t:'MTc2MTc2NTMxNS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
