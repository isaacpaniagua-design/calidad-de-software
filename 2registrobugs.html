<!doctype html>
<html lang="es">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bug Report Manager - Sistema de Gesti√≥n de Defectos</title>
  <script src="/_sdk/data_sdk.js"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
        body {
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .bug-header {
            background: linear-gradient(135deg, #dc2626 0%, #b91c1c 50%, #991b1b 100%);
            border-bottom: 4px solid #7f1d1d;
        }
        .bug-card {
            transition: all 0.3s ease;
            border: 2px solid #e5e7eb;
        }
        .bug-card:hover {
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            transform: translateY(-2px);
            border-color: #dc2626;
        }
        .severity-critica {
            background: #fee2e2;
            color: #dc2626;
            border-left: 4px solid #dc2626;
        }
        .severity-alta {
            background: #fef3c7;
            color: #d97706;
            border-left: 4px solid #d97706;
        }
        .severity-media {
            background: #dbeafe;
            color: #2563eb;
            border-left: 4px solid #2563eb;
        }
        .severity-baja {
            background: #d1fae5;
            color: #059669;
            border-left: 4px solid #059669;
        }
        .status-abierto {
            background: #fee2e2;
            color: #dc2626;
        }
        .status-en-progreso {
            background: #fef3c7;
            color: #d97706;
        }
        .status-resuelto {
            background: #dbeafe;
            color: #2563eb;
        }
        .status-cerrado {
            background: #d1fae5;
            color: #059669;
        }
        .status-reabierto {
            background: #fde2e7;
            color: #be185d;
        }
        .loading-spinner {
            border: 2px solid #f3f4f6;
            border-top: 2px solid #dc2626;
            border-radius: 50%;
            width: 16px;
            height: 16px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .status-badge {
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            padding: 4px 8px;
            border-radius: 4px;
        }
        .formal-input {
            border: 1px solid #d1d5db;
            font-size: 14px;
            transition: border-color 0.2s ease;
        }
        .formal-input:focus {
            border-color: #dc2626;
            box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.1);
        }
        .executive-button {
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-size: 13px;
            border: 2px solid transparent;
            transition: all 0.2s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .editable-field {
            cursor: pointer;
            transition: background-color 0.2s ease;
        }
        .editable-field:hover {
            background-color: rgba(220, 38, 38, 0.1);
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
 </head>
 <body class="min-h-full bg-gray-50"><!-- Header -->
  <header class="bug-header text-white py-8 mb-8">
   <div class="container mx-auto px-6">
    <div class="text-center">
     <div class="flex justify-center items-center gap-3 mb-2"><span class="text-4xl">üêõ</span>
      <h1 class="text-4xl font-bold">Bug Report Manager</h1>
     </div>
     <div class="flex justify-center items-center gap-6 text-lg mb-4 opacity-90">
      <div class="flex items-center gap-2"><span>Organizaci√≥n:</span> <span id="organization-display" class="editable-field font-semibold px-2 py-1 rounded transition-colors" title="Click para editar">Mi Organizaci√≥n</span> <input type="text" id="organization-edit" class="font-semibold bg-red-600 bg-opacity-30 text-white placeholder-red-200 border border-red-400 rounded px-2 py-1 text-lg hidden focus:outline-none focus:ring-2 focus:ring-red-300" placeholder="Nombre de la organizaci√≥n"> <button id="organization-save" class="hidden text-red-200 hover:text-white ml-1" title="Guardar">‚úì</button> <button id="organization-cancel" class="hidden text-red-200 hover:text-white ml-1" title="Cancelar">‚úó</button>
      </div><span class="text-red-200">|</span>
      <div class="flex items-center gap-2"><span>Sistema:</span> <span id="target-system-display" class="editable-field font-semibold px-2 py-1 rounded transition-colors" title="Click para editar">Sistema de Gesti√≥n</span> <input type="text" id="target-system-edit" class="font-semibold bg-red-600 bg-opacity-30 text-white placeholder-red-200 border border-red-400 rounded px-2 py-1 text-lg hidden focus:outline-none focus:ring-2 focus:ring-red-300" placeholder="Sistema objetivo"> <button id="target-system-save" class="hidden text-red-200 hover:text-white ml-1" title="Guardar">‚úì</button> <button id="target-system-cancel" class="hidden text-red-200 hover:text-white ml-1" title="Cancelar">‚úó</button>
      </div><span class="text-red-200">|</span>
      <div class="flex items-center gap-2"><span>Proyecto:</span> <span id="project-name-display" class="editable-field font-semibold px-2 py-1 rounded transition-colors" title="Click para editar">Proyecto QA</span> <input type="text" id="project-name-edit" class="font-semibold bg-red-600 bg-opacity-30 text-white placeholder-red-200 border border-red-400 rounded px-2 py-1 text-lg hidden focus:outline-none focus:ring-2 focus:ring-red-300" placeholder="Nombre del proyecto"> <button id="project-name-save" class="hidden text-red-200 hover:text-white ml-1" title="Guardar">‚úì</button> <button id="project-name-cancel" class="hidden text-red-200 hover:text-white ml-1" title="Cancelar">‚úó</button>
      </div>
     </div>
     <p class="text-red-100 max-w-4xl mx-auto text-lg leading-relaxed"><strong>Sistema profesional de gesti√≥n de defectos</strong> para documentar, rastrear y resolver bugs encontrados durante las pruebas de software. Mant√©n un registro detallado de todos los defectos.</p>
    </div>
   </div>
  </header>
  <main class="container mx-auto px-6 pb-12"><!-- Bug Report Templates -->
   <section class="mb-8">
    <div class="border-b border-red-300 pb-4 mb-6">
     <h2 class="text-2xl font-semibold text-red-800 flex items-center gap-3"><span class="text-3xl">üìã</span> Plantillas de Bug Reports Comunes</h2>
     <p class="text-red-700 mt-2 text-lg">Utilice estas plantillas predefinidas para reportar defectos comunes r√°pidamente</p>
    </div>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
     <div class="bug-card bg-white rounded-lg p-6 cursor-pointer" data-template="login-error">
      <div class="flex items-start gap-4">
       <div class="text-4xl">
        üîê
       </div>
       <div class="flex-1">
        <h3 class="text-xl font-bold text-red-800 mb-2">Error de Login</h3>
        <p class="text-red-600 mb-3">Autenticaci√≥n fallida</p>
        <div class="text-sm text-gray-600 mb-4">
         <div class="mb-1">
          ‚Ä¢ Credenciales v√°lidas rechazadas
         </div>
         <div class="mb-1">
          ‚Ä¢ Mensaje de error incorrecto
         </div>
         <div class="mb-1">
          ‚Ä¢ Severidad: Cr√≠tica
         </div>
        </div>
        <div class="text-xs bg-red-50 text-red-700 px-3 py-1 rounded-full inline-block">
         Funcionalidad: Autenticaci√≥n
        </div>
       </div>
      </div>
     </div>
     <div class="bug-card bg-white rounded-lg p-6 cursor-pointer" data-template="ui-display">
      <div class="flex items-start gap-4">
       <div class="text-4xl">
        üé®
       </div>
       <div class="flex-1">
        <h3 class="text-xl font-bold text-orange-800 mb-2">Error de UI</h3>
        <p class="text-orange-600 mb-3">Problema de interfaz</p>
        <div class="text-sm text-gray-600 mb-4">
         <div class="mb-1">
          ‚Ä¢ Elementos mal alineados
         </div>
         <div class="mb-1">
          ‚Ä¢ Texto cortado o superpuesto
         </div>
         <div class="mb-1">
          ‚Ä¢ Severidad: Media
         </div>
        </div>
        <div class="text-xs bg-orange-50 text-orange-700 px-3 py-1 rounded-full inline-block">
         Funcionalidad: Interfaz de Usuario
        </div>
       </div>
      </div>
     </div>
     <div class="bug-card bg-white rounded-lg p-6 cursor-pointer" data-template="data-validation">
      <div class="flex items-start gap-4">
       <div class="text-4xl">
        üìä
       </div>
       <div class="flex-1">
        <h3 class="text-xl font-bold text-blue-800 mb-2">Error de Validaci√≥n</h3>
        <p class="text-blue-600 mb-3">Datos incorrectos</p>
        <div class="text-sm text-gray-600 mb-4">
         <div class="mb-1">
          ‚Ä¢ Validaci√≥n de campos falla
         </div>
         <div class="mb-1">
          ‚Ä¢ Datos inv√°lidos aceptados
         </div>
         <div class="mb-1">
          ‚Ä¢ Severidad: Alta
         </div>
        </div>
        <div class="text-xs bg-blue-50 text-blue-700 px-3 py-1 rounded-full inline-block">
         Funcionalidad: Validaci√≥n de Datos
        </div>
       </div>
      </div>
     </div>
     <div class="bug-card bg-white rounded-lg p-6 cursor-pointer" data-template="performance-issue">
      <div class="flex items-start gap-4">
       <div class="text-4xl">
        ‚ö°
       </div>
       <div class="flex-1">
        <h3 class="text-xl font-bold text-yellow-800 mb-2">Problema de Performance</h3>
        <p class="text-yellow-600 mb-3">Lentitud del sistema</p>
        <div class="text-sm text-gray-600 mb-4">
         <div class="mb-1">
          ‚Ä¢ Carga lenta de p√°ginas
         </div>
         <div class="mb-1">
          ‚Ä¢ Timeout en operaciones
         </div>
         <div class="mb-1">
          ‚Ä¢ Severidad: Media
         </div>
        </div>
        <div class="text-xs bg-yellow-50 text-yellow-700 px-3 py-1 rounded-full inline-block">
         Funcionalidad: Performance
        </div>
       </div>
      </div>
     </div>
     <div class="bug-card bg-white rounded-lg p-6 cursor-pointer" data-template="api-error">
      <div class="flex items-start gap-4">
       <div class="text-4xl">
        üîå
       </div>
       <div class="flex-1">
        <h3 class="text-xl font-bold text-purple-800 mb-2">Error de API</h3>
        <p class="text-purple-600 mb-3">Falla en servicios</p>
        <div class="text-sm text-gray-600 mb-4">
         <div class="mb-1">
          ‚Ä¢ Respuesta HTTP incorrecta
         </div>
         <div class="mb-1">
          ‚Ä¢ Datos malformados
         </div>
         <div class="mb-1">
          ‚Ä¢ Severidad: Alta
         </div>
        </div>
        <div class="text-xs bg-purple-50 text-purple-700 px-3 py-1 rounded-full inline-block">
         Funcionalidad: API/Servicios
        </div>
       </div>
      </div>
     </div>
     <div class="bug-card bg-white rounded-lg p-6 cursor-pointer" data-template="browser-compatibility">
      <div class="flex items-start gap-4">
       <div class="text-4xl">
        üåê
       </div>
       <div class="flex-1">
        <h3 class="text-xl font-bold text-green-800 mb-2">Compatibilidad</h3>
        <p class="text-green-600 mb-3">Problema de navegador</p>
        <div class="text-sm text-gray-600 mb-4">
         <div class="mb-1">
          ‚Ä¢ Funciona solo en un browser
         </div>
         <div class="mb-1">
          ‚Ä¢ CSS/JS no compatible
         </div>
         <div class="mb-1">
          ‚Ä¢ Severidad: Media
         </div>
        </div>
        <div class="text-xs bg-green-50 text-green-700 px-3 py-1 rounded-full inline-block">
         Funcionalidad: Compatibilidad
        </div>
       </div>
      </div>
     </div>
    </div>
   </section><!-- Bug Report Form -->
   <section class="bg-white rounded-lg p-8 mb-8 border border-red-200">
    <div class="border-b border-red-200 pb-4 mb-6">
     <h2 class="text-2xl font-semibold text-red-800 flex items-center gap-3"><span class="text-3xl">üêõ</span> Crear Nuevo Bug Report</h2>
     <p class="text-red-700 mt-2">Complete todos los campos para documentar el defecto encontrado</p>
    </div>
    <form id="bug-form" class="space-y-6">
     <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
      <div><label for="bug-id" class="block text-sm font-semibold text-red-700 mb-2"> ID del Bug * </label> <input type="text" id="bug-id" class="formal-input w-full px-4 py-3 rounded-md focus:outline-none" placeholder="BUG-001" required>
       <p class="text-xs text-red-600 mt-1">Identificador √∫nico del defecto</p>
      </div>
      <div><label for="test-case-id" class="block text-sm font-semibold text-red-700 mb-2"> Caso de Prueba Asociado </label> <input type="text" id="test-case-id" class="formal-input w-full px-4 py-3 rounded-md focus:outline-none" placeholder="CP-LOGIN-001">
       <p class="text-xs text-red-600 mt-1">ID del caso de prueba que fall√≥</p>
      </div>
      <div><label for="reporter" class="block text-sm font-semibold text-red-700 mb-2"> Reportado por * </label> <input type="text" id="reporter" class="formal-input w-full px-4 py-3 rounded-md focus:outline-none" placeholder="Juan P√©rez" required>
       <p class="text-xs text-red-600 mt-1">Nombre del tester que encontr√≥ el bug</p>
      </div>
     </div>
     <div><label for="bug-title" class="block text-sm font-semibold text-red-700 mb-2"> T√≠tulo del Bug * </label> <input type="text" id="bug-title" class="formal-input w-full px-4 py-3 rounded-md focus:outline-none" placeholder="Error de autenticaci√≥n al usar credenciales v√°lidas" required>
      <p class="text-xs text-red-600 mt-1">Descripci√≥n clara y concisa del problema</p>
     </div>
     <div><label for="steps-to-reproduce" class="block text-sm font-semibold text-red-700 mb-2"> Pasos para Reproducir * </label> <textarea id="steps-to-reproduce" rows="4" class="formal-input w-full px-4 py-3 rounded-md focus:outline-none" placeholder="1. Abrir la p√°gina de login
2. Ingresar usuario: admin@test.com
3. Ingresar contrase√±a: Admin123
4. Hacer clic en 'Iniciar Sesi√≥n'
5. Observar el resultado" required></textarea>
      <p class="text-xs text-red-600 mt-1">Pasos detallados para reproducir el defecto</p>
     </div>
     <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
      <div><label for="actual-result" class="block text-sm font-semibold text-red-700 mb-2"> Resultado Actual * </label> <textarea id="actual-result" rows="4" class="formal-input w-full px-4 py-3 rounded-md focus:outline-none" placeholder="El sistema muestra el mensaje 'Usuario o contrase√±a inv√°lido' y no permite el acceso." required></textarea>
       <p class="text-xs text-red-600 mt-1">Lo que realmente sucede</p>
      </div>
      <div><label for="expected-result" class="block text-sm font-semibold text-red-700 mb-2"> Resultado Esperado * </label> <textarea id="expected-result" rows="4" class="formal-input w-full px-4 py-3 rounded-md focus:outline-none" placeholder="El sistema deb√≠a permitir el acceso al Dashboard principal." required></textarea>
       <p class="text-xs text-red-600 mt-1">Lo que deber√≠a suceder</p>
      </div>
     </div>
     <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
      <div><label for="severity" class="block text-sm font-semibold text-red-700 mb-2"> Severidad * </label> <select id="severity" class="formal-input w-full px-4 py-3 rounded-md focus:outline-none" required> <option value="">Seleccionar severidad</option> <option value="critica">üî¥ Cr√≠tica - Sistema no funciona</option> <option value="alta">üü† Alta - Funcionalidad principal afectada</option> <option value="media" selected>üü° Media - Funcionalidad secundaria</option> <option value="baja">üü¢ Baja - Problema cosm√©tico</option> </select>
      </div>
      <div><label for="priority" class="block text-sm font-semibold text-red-700 mb-2"> Prioridad * </label> <select id="priority" class="formal-input w-full px-4 py-3 rounded-md focus:outline-none" required> <option value="">Seleccionar prioridad</option> <option value="alta">üî¥ Alta - Arreglar inmediatamente</option> <option value="media" selected>üü° Media - Arreglar en pr√≥ximo release</option> <option value="baja">üü¢ Baja - Arreglar cuando sea posible</option> </select>
      </div>
      <div><label for="environment" class="block text-sm font-semibold text-red-700 mb-2"> Ambiente </label> <select id="environment" class="formal-input w-full px-4 py-3 rounded-md focus:outline-none"> <option value="desarrollo">üîß Desarrollo</option> <option value="testing" selected>üß™ Testing</option> <option value="staging">üé≠ Staging</option> <option value="produccion">üöÄ Producci√≥n</option> </select>
      </div>
      <div><label for="browser" class="block text-sm font-semibold text-red-700 mb-2"> Navegador </label> <select id="browser" class="formal-input w-full px-4 py-3 rounded-md focus:outline-none"> <option value="chrome" selected>Chrome</option> <option value="firefox">Firefox</option> <option value="safari">Safari</option> <option value="edge">Edge</option> <option value="otros">Otros</option> </select>
      </div>
     </div>
     <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
      <div><label for="assignee" class="block text-sm font-semibold text-red-700 mb-2"> Asignado a </label> <input type="text" id="assignee" class="formal-input w-full px-4 py-3 rounded-md focus:outline-none" placeholder="Mar√≠a Garc√≠a">
       <p class="text-xs text-red-600 mt-1">Desarrollador responsable de la correcci√≥n</p>
      </div>
      <div><label for="attachments" class="block text-sm font-semibold text-red-700 mb-2"> Adjuntos (URLs o Descripci√≥n) </label> <input type="text" id="attachments" class="formal-input w-full px-4 py-3 rounded-md focus:outline-none" placeholder="screenshot.png, error.log, video_demo.mp4">
       <p class="text-xs text-red-600 mt-1">¬°Indispensable! Capturas, videos, logs</p>
      </div>
     </div>
     <div class="flex justify-end"><button type="submit" id="create-bug-btn" class="executive-button bg-red-700 hover:bg-red-800 text-white px-8 py-3 rounded-md flex items-center gap-3"> <span>Crear Bug Report</span>
       <div id="bug-loading" class="loading-spinner hidden"></div></button>
     </div>
    </form>
   </section><!-- Bug Reports List -->
   <section id="bug-reports-container">
    <div class="border-b border-red-300 pb-4 mb-6">
     <div class="flex justify-between items-center">
      <div>
       <h2 class="text-2xl font-semibold text-red-800 flex items-center gap-3"><span class="text-3xl">üìä</span> Bug Reports Registrados</h2>
       <p class="text-red-700 mt-1">Gesti√≥n completa de defectos encontrados</p>
      </div>
      <div class="flex gap-4 text-sm">
       <div class="flex items-center gap-2">
        <div class="w-3 h-3 bg-red-500 rounded"></div><span>Abierto</span>
       </div>
       <div class="flex items-center gap-2">
        <div class="w-3 h-3 bg-yellow-500 rounded"></div><span>En Progreso</span>
       </div>
       <div class="flex items-center gap-2">
        <div class="w-3 h-3 bg-blue-500 rounded"></div><span>Resuelto</span>
       </div>
       <div class="flex items-center gap-2">
        <div class="w-3 h-3 bg-green-500 rounded"></div><span>Cerrado</span>
       </div>
      </div>
     </div>
    </div><!-- Bug Summary -->
    <div class="grid grid-cols-1 md:grid-cols-5 gap-6 mb-8">
     <div class="bg-white rounded-lg p-6 border border-red-200 text-center shadow-sm">
      <div class="text-3xl font-bold text-red-700 mb-2" id="total-bugs">
       0
      </div>
      <div class="text-sm text-red-600">
       Total Bugs
      </div>
      <div class="text-xs text-gray-500 mt-1">
       Defectos registrados
      </div>
     </div>
     <div class="bg-white rounded-lg p-6 border border-red-200 text-center shadow-sm">
      <div class="text-3xl font-bold text-red-700 mb-2" id="open-bugs">
       0
      </div>
      <div class="text-sm text-red-600">
       Abiertos
      </div>
      <div class="text-xs text-gray-500 mt-1" id="open-percentage">
       0% del total
      </div>
     </div>
     <div class="bg-white rounded-lg p-6 border border-yellow-200 text-center shadow-sm">
      <div class="text-3xl font-bold text-yellow-700 mb-2" id="progress-bugs">
       0
      </div>
      <div class="text-sm text-yellow-600">
       En Progreso
      </div>
      <div class="text-xs text-gray-500 mt-1" id="progress-percentage">
       0% del total
      </div>
     </div>
     <div class="bg-white rounded-lg p-6 border border-blue-200 text-center shadow-sm">
      <div class="text-3xl font-bold text-blue-700 mb-2" id="resolved-bugs">
       0
      </div>
      <div class="text-sm text-blue-600">
       Resueltos
      </div>
      <div class="text-xs text-gray-500 mt-1" id="resolved-percentage">
       0% del total
      </div>
     </div>
     <div class="bg-white rounded-lg p-6 border border-green-200 text-center shadow-sm">
      <div class="text-3xl font-bold text-green-700 mb-2" id="closed-bugs">
       0
      </div>
      <div class="text-sm text-green-600">
       Cerrados
      </div>
      <div class="text-xs text-gray-500 mt-1" id="closed-percentage">
       0% del total
      </div>
     </div>
    </div><!-- Bug Reports Table -->
    <div class="bg-white rounded-lg border border-red-200 overflow-hidden shadow-sm">
     <div class="overflow-x-auto">
      <table class="w-full">
       <thead class="bg-red-100 border-b border-red-200">
        <tr>
         <th class="text-left p-4 font-semibold text-red-800">Bug ID</th>
         <th class="text-left p-4 font-semibold text-red-800">T√≠tulo</th>
         <th class="text-left p-4 font-semibold text-red-800">Severidad</th>
         <th class="text-left p-4 font-semibold text-red-800">Estado</th>
         <th class="text-left p-4 font-semibold text-red-800">Reportado por</th>
         <th class="text-left p-4 font-semibold text-red-800">Asignado a</th>
         <th class="text-center p-4 font-semibold text-red-800">Acciones</th>
        </tr>
       </thead>
       <tbody id="bug-reports-table"><!-- Bug entries will be rendered here -->
       </tbody>
      </table>
     </div>
    </div>
    <div id="no-bugs-message" class="text-center py-16 text-red-600">
     <div class="text-6xl mb-4 text-red-400">
      üêõ
     </div>
     <h3 class="text-2xl font-medium text-red-700 mb-3">No hay Bug Reports Registrados</h3>
     <p class="text-red-600 text-lg mb-4">Use las plantillas predefinidas o cree reportes personalizados para comenzar</p>
     <p class="text-sm text-gray-500">Seleccione una plantilla arriba para cargar un bug report de ejemplo</p>
    </div>
   </section><!-- Actions -->
   <section class="mt-8 flex justify-center gap-4"><button id="export-bug-reports" class="executive-button bg-red-700 hover:bg-red-800 text-white px-6 py-3 rounded-md flex items-center gap-2"> <span class="text-lg">üìä</span> Exportar Bug Reports </button> <button id="clear-bug-reports" class="executive-button bg-gray-700 hover:bg-gray-800 text-white px-6 py-3 rounded-md flex items-center gap-2"> <span class="text-lg">üóëÔ∏è</span> Limpiar Bug Reports </button>
   </section>
  </main>
  <script>
        // Configuration and state
        const defaultConfig = {
            organization_name: "Mi Organizaci√≥n",
            target_system: "Sistema de Gesti√≥n",
            project_name: "Proyecto QA"
        };

        let bugReports = [];
        let isInitialized = false;

        // Bug Report Templates
        const bugTemplates = {
            "login-error": {
                bug_id: "BUG-001",
                title: "Error de autenticaci√≥n al usar credenciales v√°lidas",
                test_case_id: "CP-LOGIN-001",
                steps_to_reproduce: "1. Abrir la p√°gina de login\n2. Ingresar usuario: admin@test.com\n3. Ingresar contrase√±a: Admin123\n4. Hacer clic en 'Iniciar Sesi√≥n'\n5. Observar el resultado",
                actual_result: "El sistema muestra el mensaje 'Usuario o contrase√±a inv√°lido' y no permite el acceso.",
                expected_result: "El sistema deb√≠a permitir el acceso al Dashboard principal.",
                severity: "critica",
                priority: "alta",
                status: "abierto",
                reporter: "Ana Garc√≠a",
                assignee: "Carlos L√≥pez",
                environment: "testing",
                browser: "chrome",
                attachments: "login_error_screenshot.png, console_error.log"
            },
            "ui-display": {
                bug_id: "BUG-002",
                title: "Elementos de la interfaz se superponen en resoluci√≥n 1024x768",
                test_case_id: "CP-UI-005",
                steps_to_reproduce: "1. Abrir la aplicaci√≥n en navegador\n2. Cambiar resoluci√≥n a 1024x768\n3. Navegar a la p√°gina de configuraci√≥n\n4. Observar la disposici√≥n de elementos",
                actual_result: "Los botones 'Guardar' y 'Cancelar' se superponen con el texto de ayuda.",
                expected_result: "Todos los elementos deben estar correctamente alineados sin superposici√≥n.",
                severity: "media",
                priority: "media",
                status: "abierto",
                reporter: "Miguel Torres",
                assignee: "Laura Mart√≠n",
                environment: "testing",
                browser: "firefox",
                attachments: "ui_overlap_screenshot.png"
            },
            "data-validation": {
                bug_id: "BUG-003",
                title: "Validaci√≥n de email permite direcciones inv√°lidas",
                test_case_id: "CP-FORM-003",
                steps_to_reproduce: "1. Abrir formulario de registro\n2. Ingresar email: 'usuario@dominio'\n3. Completar otros campos requeridos\n4. Hacer clic en 'Registrar'\n5. Observar el resultado",
                actual_result: "El sistema acepta el email inv√°lido y procesa el registro.",
                expected_result: "El sistema debe mostrar error 'Formato de email inv√°lido' y no procesar el registro.",
                severity: "alta",
                priority: "alta",
                status: "en-progreso",
                reporter: "Sofia Ruiz",
                assignee: "Diego Fern√°ndez",
                environment: "testing",
                browser: "chrome",
                attachments: "validation_error_video.mp4, form_data.json"
            },
            "performance-issue": {
                bug_id: "BUG-004",
                title: "Carga de dashboard toma m√°s de 10 segundos",
                test_case_id: "CP-PERF-001",
                steps_to_reproduce: "1. Hacer login exitoso\n2. Navegar al dashboard principal\n3. Medir tiempo de carga completa\n4. Repetir 5 veces para confirmar",
                actual_result: "El dashboard tarda entre 12-15 segundos en cargar completamente.",
                expected_result: "El dashboard debe cargar en menos de 3 segundos seg√∫n especificaciones.",
                severity: "media",
                priority: "alta",
                status: "resuelto",
                reporter: "Roberto Silva",
                assignee: "Elena Vega",
                environment: "staging",
                browser: "chrome",
                attachments: "performance_report.pdf, network_trace.har"
            },
            "api-error": {
                bug_id: "BUG-005",
                title: "API devuelve error 500 al actualizar perfil de usuario",
                test_case_id: "CP-API-007",
                steps_to_reproduce: "1. Hacer login como usuario est√°ndar\n2. Ir a 'Mi Perfil'\n3. Modificar nombre y apellido\n4. Hacer clic en 'Actualizar Perfil'\n5. Observar respuesta del servidor",
                actual_result: "La API devuelve HTTP 500 Internal Server Error y no actualiza los datos.",
                expected_result: "La API debe devolver HTTP 200 OK y actualizar correctamente el perfil.",
                severity: "alta",
                priority: "alta",
                status: "abierto",
                reporter: "Patricia Morales",
                assignee: "Andr√©s Castro",
                environment: "testing",
                browser: "edge",
                attachments: "api_error_response.json, server_logs.txt"
            },
            "browser-compatibility": {
                bug_id: "BUG-006",
                title: "Funcionalidad de drag & drop no funciona en Safari",
                test_case_id: "CP-COMPAT-002",
                steps_to_reproduce: "1. Abrir aplicaci√≥n en Safari\n2. Ir a secci√≥n de gesti√≥n de archivos\n3. Intentar arrastrar archivo desde escritorio\n4. Soltar archivo en zona designada\n5. Observar comportamiento",
                actual_result: "El archivo no se carga y no hay feedback visual del drag & drop.",
                expected_result: "El archivo debe cargarse correctamente con feedback visual durante el proceso.",
                severity: "media",
                priority: "media",
                status: "cerrado",
                reporter: "Fernando Jim√©nez",
                assignee: "Claudia Herrera",
                environment: "produccion",
                browser: "safari",
                attachments: "safari_dragdrop_test.mov, compatibility_matrix.xlsx"
            }
        };

        // Data handler for SDK
        const dataHandler = {
            onDataChanged(data) {
                bugReports = data.sort((a, b) => {
                    const severityOrder = { 'critica': 0, 'alta': 1, 'media': 2, 'baja': 3 };
                    const statusOrder = { 'abierto': 0, 'en-progreso': 1, 'reabierto': 2, 'resuelto': 3, 'cerrado': 4 };
                    
                    if (severityOrder[a.severity] !== severityOrder[b.severity]) {
                        return severityOrder[a.severity] - severityOrder[b.severity];
                    }
                    return statusOrder[a.status] - statusOrder[b.status];
                });
                
                renderBugReports();
            }
        };

        // Element SDK configuration
        const elementConfig = {
            defaultConfig,
            onConfigChange: async (config) => {
                document.getElementById('organization-display').textContent = config.organization_name || defaultConfig.organization_name;
                document.getElementById('target-system-display').textContent = config.target_system || defaultConfig.target_system;
                document.getElementById('project-name-display').textContent = config.project_name || defaultConfig.project_name;
            },
            mapToCapabilities: (config) => ({
                recolorables: [],
                borderables: [],
                fontEditable: undefined,
                fontSizeable: undefined
            }),
            mapToEditPanelValues: (config) => new Map([
                ["organization_name", config.organization_name || defaultConfig.organization_name],
                ["target_system", config.target_system || defaultConfig.target_system],
                ["project_name", config.project_name || defaultConfig.project_name]
            ])
        };

        // Initialize SDKs
        async function initializeApp() {
            try {
                if (window.elementSdk) {
                    await window.elementSdk.init(elementConfig);
                }
                
                if (window.dataSdk) {
                    const result = await window.dataSdk.init(dataHandler);
                    if (!result.isOk) {
                        console.error("Failed to initialize data SDK");
                    }
                }
                
                isInitialized = true;
                setupEventListeners();
                generateNextBugId();
            } catch (error) {
                console.error("Initialization error:", error);
                setupEventListeners();
                generateNextBugId();
            }
        }

        // Setup event listeners
        function setupEventListeners() {
            // Template cards
            document.querySelectorAll('[data-template]').forEach(card => {
                card.addEventListener('click', handleTemplateClick);
            });

            // Bug form
            document.getElementById('bug-form').addEventListener('submit', handleBugFormSubmit);

            // Action buttons
            document.getElementById('export-bug-reports').addEventListener('click', handleExportBugReports);
            document.getElementById('clear-bug-reports').addEventListener('click', handleClearBugReports);

            // Inline editing setup
            setupInlineEditing('organization', 'organization_name');
            setupInlineEditing('target-system', 'target_system');
            setupInlineEditing('project-name', 'project_name');
        }

        // Setup inline editing for a field
        function setupInlineEditing(fieldPrefix, configKey) {
            const display = document.getElementById(`${fieldPrefix}-display`);
            const input = document.getElementById(`${fieldPrefix}-edit`);
            const saveBtn = document.getElementById(`${fieldPrefix}-save`);
            const cancelBtn = document.getElementById(`${fieldPrefix}-cancel`);

            display.addEventListener('click', () => startInlineEdit(fieldPrefix));
            saveBtn.addEventListener('click', () => saveInlineEdit(fieldPrefix, configKey));
            cancelBtn.addEventListener('click', () => cancelInlineEdit(fieldPrefix));
            input.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') saveInlineEdit(fieldPrefix, configKey);
                if (e.key === 'Escape') cancelInlineEdit(fieldPrefix);
            });
        }

        // Generate next bug ID
        function generateNextBugId() {
            const existingIds = bugReports.map(bug => {
                const match = bug.bug_id.match(/BUG-(\d+)/);
                return match ? parseInt(match[1]) : 0;
            });
            const nextId = Math.max(0, ...existingIds) + 1;
            document.getElementById('bug-id').value = `BUG-${nextId.toString().padStart(3, '0')}`;
        }

        // Handle template clicks
        function handleTemplateClick(event) {
            const templateType = event.currentTarget.dataset.template;
            const template = bugTemplates[templateType];
            
            if (template) {
                // Fill form with template data
                document.getElementById('bug-id').value = template.bug_id;
                document.getElementById('bug-title').value = template.title;
                document.getElementById('test-case-id').value = template.test_case_id;
                document.getElementById('steps-to-reproduce').value = template.steps_to_reproduce;
                document.getElementById('actual-result').value = template.actual_result;
                document.getElementById('expected-result').value = template.expected_result;
                document.getElementById('severity').value = template.severity;
                document.getElementById('priority').value = template.priority;
                document.getElementById('reporter').value = template.reporter;
                document.getElementById('assignee').value = template.assignee;
                document.getElementById('environment').value = template.environment;
                document.getElementById('browser').value = template.browser;
                document.getElementById('attachments').value = template.attachments;
                
                showToast(`Plantilla "${templateType}" cargada en el formulario`, "success");
                
                // Scroll to form
                document.getElementById('bug-form').scrollIntoView({ behavior: 'smooth' });
            }
        }

        // Handle bug form submission
        async function handleBugFormSubmit(event) {
            event.preventDefault();
            
            if (bugReports.length >= 999) {
                showToast("L√≠mite m√°ximo de 999 bug reports alcanzado", "error");
                return;
            }
            
            const bugData = {
                bug_id: document.getElementById('bug-id').value,
                title: document.getElementById('bug-title').value,
                test_case_id: document.getElementById('test-case-id').value,
                steps_to_reproduce: document.getElementById('steps-to-reproduce').value,
                actual_result: document.getElementById('actual-result').value,
                expected_result: document.getElementById('expected-result').value,
                severity: document.getElementById('severity').value,
                priority: document.getElementById('priority').value,
                status: "abierto",
                reporter: document.getElementById('reporter').value,
                assignee: document.getElementById('assignee').value,
                environment: document.getElementById('environment').value,
                browser: document.getElementById('browser').value,
                attachments: document.getElementById('attachments').value,
                created_at: new Date().toISOString(),
                updated_at: new Date().toISOString()
            };
            
            const createButton = document.getElementById('create-bug-btn');
            const loading = document.getElementById('bug-loading');
            
            createButton.disabled = true;
            loading.classList.remove('hidden');
            
            try {
                if (window.dataSdk) {
                    const result = await window.dataSdk.create(bugData);
                    if (result.isOk) {
                        showToast("Bug Report creado exitosamente", "success");
                        document.getElementById('bug-form').reset();
                        generateNextBugId();
                        // Reset selects to default values
                        document.getElementById('severity').value = 'media';
                        document.getElementById('priority').value = 'media';
                        document.getElementById('environment').value = 'testing';
                        document.getElementById('browser').value = 'chrome';
                    } else {
                        showToast("Error al crear el bug report", "error");
                    }
                } else {
                    bugReports.push({ ...bugData, __backendId: `bug-${Date.now()}-${Math.random()}` });
                    renderBugReports();
                    showToast("Bug Report creado exitosamente", "success");
                    document.getElementById('bug-form').reset();
                    generateNextBugId();
                }
            } catch (error) {
                console.error("Error creating bug report:", error);
                showToast("Error al crear el bug report", "error");
            } finally {
                createButton.disabled = false;
                loading.classList.add('hidden');
            }
        }

        // Render Bug Reports
        function renderBugReports() {
            const tableBody = document.getElementById('bug-reports-table');
            const noMessage = document.getElementById('no-bugs-message');
            
            if (bugReports.length === 0) {
                tableBody.innerHTML = '';
                noMessage.style.display = 'block';
                updateBugSummary();
                return;
            }
            
            noMessage.style.display = 'none';
            
            tableBody.innerHTML = bugReports.map(bug => `
                <tr class="border-b border-red-100 hover:bg-red-50">
                    <td class="p-4">
                        <div class="font-bold text-red-800">${bug.bug_id}</div>
                        <div class="text-xs text-gray-500">${bug.test_case_id || 'N/A'}</div>
                    </td>
                    <td class="p-4">
                        <div class="font-medium text-gray-800 mb-1">${bug.title}</div>
                        <div class="text-xs text-gray-500">${bug.environment} - ${bug.browser}</div>
                    </td>
                    <td class="p-4">
                        <span class="status-badge severity-${bug.severity}">
                            ${bug.severity === 'critica' ? 'üî¥ Cr√≠tica' : 
                              bug.severity === 'alta' ? 'üü† Alta' : 
                              bug.severity === 'media' ? 'üü° Media' : 'üü¢ Baja'}
                        </span>
                    </td>
                    <td class="p-4">
                        <select class="status-badge status-${bug.status} border-none bg-transparent text-xs font-semibold cursor-pointer" 
                                data-bug-id="${bug.__backendId}" onchange="updateBugStatus(this)">
                            <option value="abierto" ${bug.status === 'abierto' ? 'selected' : ''}>üî¥ Abierto</option>
                            <option value="en-progreso" ${bug.status === 'en-progreso' ? 'selected' : ''}>üü° En Progreso</option>
                            <option value="resuelto" ${bug.status === 'resuelto' ? 'selected' : ''}>üîµ Resuelto</option>
                            <option value="cerrado" ${bug.status === 'cerrado' ? 'selected' : ''}>üü¢ Cerrado</option>
                            <option value="reabierto" ${bug.status === 'reabierto' ? 'selected' : ''}>üü£ Reabierto</option>
                        </select>
                    </td>
                    <td class="p-4">
                        <div class="text-sm text-gray-700">${bug.reporter}</div>
                        <div class="text-xs text-gray-500">${new Date(bug.created_at).toLocaleDateString()}</div>
                    </td>
                    <td class="p-4">
                        <div class="text-sm text-gray-700">${bug.assignee || 'Sin asignar'}</div>
                    </td>
                    <td class="p-4 text-center">
                        <button class="view-bug text-blue-600 hover:text-blue-800 hover:bg-blue-50 p-2 rounded-md transition-colors mr-2" 
                                data-bug-id="${bug.__backendId}" title="Ver detalles">
                            üëÅÔ∏è
                        </button>
                        <button class="delete-bug text-red-600 hover:text-red-800 hover:bg-red-50 p-2 rounded-md transition-colors" 
                                data-bug-id="${bug.__backendId}" title="Eliminar">
                            üóëÔ∏è
                        </button>
                    </td>
                </tr>
            `).join('');
            
            // Add event listeners
            tableBody.querySelectorAll('.delete-bug').forEach(button => {
                button.addEventListener('click', handleDeleteBug);
            });
            
            tableBody.querySelectorAll('.view-bug').forEach(button => {
                button.addEventListener('click', handleViewBug);
            });
            
            updateBugSummary();
        }

        // Update bug status
        async function updateBugStatus(selectElement) {
            const bugId = selectElement.dataset.bugId;
            const newStatus = selectElement.value;
            const bug = bugReports.find(b => b.__backendId === bugId);
            
            if (bug) {
                bug.status = newStatus;
                bug.updated_at = new Date().toISOString();
                
                if (window.dataSdk) {
                    const result = await window.dataSdk.update(bug);
                    if (result.isOk) {
                        showToast("Estado actualizado exitosamente", "success");
                    } else {
                        showToast("Error al actualizar el estado", "error");
                        // Revert the change
                        selectElement.value = bug.status;
                    }
                } else {
                    renderBugReports();
                    showToast("Estado actualizado exitosamente", "success");
                }
            }
        }

        // Make updateBugStatus globally available
        window.updateBugStatus = updateBugStatus;

        // Update Bug Summary
        function updateBugSummary() {
            const totalBugs = bugReports.length;
            const openBugs = bugReports.filter(b => b.status === 'abierto').length;
            const progressBugs = bugReports.filter(b => b.status === 'en-progreso').length;
            const resolvedBugs = bugReports.filter(b => b.status === 'resuelto').length;
            const closedBugs = bugReports.filter(b => b.status === 'cerrado').length;
            
            document.getElementById('total-bugs').textContent = totalBugs;
            document.getElementById('open-bugs').textContent = openBugs;
            document.getElementById('progress-bugs').textContent = progressBugs;
            document.getElementById('resolved-bugs').textContent = resolvedBugs;
            document.getElementById('closed-bugs').textContent = closedBugs;
            
            // Update percentages
            const openPercentage = totalBugs > 0 ? Math.round((openBugs / totalBugs) * 100) : 0;
            const progressPercentage = totalBugs > 0 ? Math.round((progressBugs / totalBugs) * 100) : 0;
            const resolvedPercentage = totalBugs > 0 ? Math.round((resolvedBugs / totalBugs) * 100) : 0;
            const closedPercentage = totalBugs > 0 ? Math.round((closedBugs / totalBugs) * 100) : 0;
            
            document.getElementById('open-percentage').textContent = `${openPercentage}% del total`;
            document.getElementById('progress-percentage').textContent = `${progressPercentage}% del total`;
            document.getElementById('resolved-percentage').textContent = `${resolvedPercentage}% del total`;
            document.getElementById('closed-percentage').textContent = `${closedPercentage}% del total`;
        }

        // Handle view bug
        function handleViewBug(event) {
            const bugId = event.currentTarget.dataset.bugId;
            const bug = bugReports.find(b => b.__backendId === bugId);
            
            if (bug) {
                showBugDetails(bug);
            }
        }

        // Show bug details modal
        function showBugDetails(bug) {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
            modal.innerHTML = `
                <div class="bg-white rounded-lg max-w-4xl w-full max-h-full overflow-y-auto">
                    <div class="p-6 border-b border-gray-200">
                        <div class="flex justify-between items-center">
                            <h3 class="text-2xl font-bold text-red-800">${bug.bug_id}: ${bug.title}</h3>
                            <button class="close-modal text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
                        </div>
                    </div>
                    <div class="p-6 space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <h4 class="font-semibold text-gray-800 mb-2">Informaci√≥n General</h4>
                                <div class="space-y-2 text-sm">
                                    <div><strong>Caso de Prueba:</strong> ${bug.test_case_id || 'N/A'}</div>
                                    <div><strong>Reportado por:</strong> ${bug.reporter}</div>
                                    <div><strong>Asignado a:</strong> ${bug.assignee || 'Sin asignar'}</div>
                                    <div><strong>Ambiente:</strong> ${bug.environment}</div>
                                    <div><strong>Navegador:</strong> ${bug.browser}</div>
                                    <div><strong>Creado:</strong> ${new Date(bug.created_at).toLocaleString()}</div>
                                </div>
                            </div>
                            <div>
                                <h4 class="font-semibold text-gray-800 mb-2">Estado y Prioridad</h4>
                                <div class="space-y-2">
                                    <div class="flex items-center gap-2">
                                        <strong>Severidad:</strong>
                                        <span class="status-badge severity-${bug.severity}">
                                            ${bug.severity === 'critica' ? 'üî¥ Cr√≠tica' : 
                                              bug.severity === 'alta' ? 'üü† Alta' : 
                                              bug.severity === 'media' ? 'üü° Media' : 'üü¢ Baja'}
                                        </span>
                                    </div>
                                    <div class="flex items-center gap-2">
                                        <strong>Prioridad:</strong>
                                        <span class="status-badge priority-${bug.priority}">
                                            ${bug.priority === 'alta' ? 'üî¥ Alta' : 
                                              bug.priority === 'media' ? 'üü° Media' : 'üü¢ Baja'}
                                        </span>
                                    </div>
                                    <div class="flex items-center gap-2">
                                        <strong>Estado:</strong>
                                        <span class="status-badge status-${bug.status}">
                                            ${bug.status === 'abierto' ? 'üî¥ Abierto' : 
                                              bug.status === 'en-progreso' ? 'üü° En Progreso' : 
                                              bug.status === 'resuelto' ? 'üîµ Resuelto' : 
                                              bug.status === 'cerrado' ? 'üü¢ Cerrado' : 'üü£ Reabierto'}
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold text-gray-800 mb-2">Pasos para Reproducir</h4>
                            <div class="bg-gray-50 p-4 rounded-md">
                                <pre class="whitespace-pre-wrap text-sm">${bug.steps_to_reproduce}</pre>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <h4 class="font-semibold text-gray-800 mb-2">Resultado Actual</h4>
                                <div class="bg-red-50 p-4 rounded-md border-l-4 border-red-500">
                                    <p class="text-sm">${bug.actual_result}</p>
                                </div>
                            </div>
                            <div>
                                <h4 class="font-semibold text-gray-800 mb-2">Resultado Esperado</h4>
                                <div class="bg-green-50 p-4 rounded-md border-l-4 border-green-500">
                                    <p class="text-sm">${bug.expected_result}</p>
                                </div>
                            </div>
                        </div>
                        
                        ${bug.attachments ? `
                        <div>
                            <h4 class="font-semibold text-gray-800 mb-2">Adjuntos</h4>
                            <div class="bg-blue-50 p-4 rounded-md">
                                <p class="text-sm">${bug.attachments}</p>
                            </div>
                        </div>
                        ` : ''}
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Close modal event
            modal.querySelector('.close-modal').addEventListener('click', () => {
                document.body.removeChild(modal);
            });
            
            // Close on backdrop click
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    document.body.removeChild(modal);
                }
            });
        }

        // Handle delete bug
        async function handleDeleteBug(event) {
            const bugId = event.currentTarget.dataset.bugId;
            const bug = bugReports.find(b => b.__backendId === bugId);
            
            if (bug) {
                // Create inline confirmation
                const row = event.currentTarget.closest('tr');
                const originalContent = row.innerHTML;
                
                row.innerHTML = `
                    <td colspan="7" class="p-4 bg-red-50 text-center">
                        <div class="flex items-center justify-center gap-4">
                            <span class="text-red-700">¬øEliminar "${bug.bug_id}: ${bug.title}"?</span>
                            <button class="confirm-delete bg-red-600 text-white px-4 py-2 rounded text-sm hover:bg-red-700">
                                Confirmar
                            </button>
                            <button class="cancel-delete bg-gray-600 text-white px-4 py-2 rounded text-sm hover:bg-gray-700">
                                Cancelar
                            </button>
                        </div>
                    </td>
                `;
                
                // Handle confirmation
                row.querySelector('.confirm-delete').addEventListener('click', async () => {
                    if (window.dataSdk) {
                        const result = await window.dataSdk.delete(bug);
                        if (result.isOk) {
                            showToast("Bug report eliminado exitosamente", "success");
                        } else {
                            showToast("Error al eliminar el bug report", "error");
                            row.innerHTML = originalContent;
                        }
                    } else {
                        bugReports = bugReports.filter(b => b.__backendId !== bugId);
                        renderBugReports();
                        showToast("Bug report eliminado exitosamente", "success");
                    }
                });
                
                // Handle cancellation
                row.querySelector('.cancel-delete').addEventListener('click', () => {
                    row.innerHTML = originalContent;
                    // Re-attach event listeners
                    row.querySelector('.delete-bug').addEventListener('click', handleDeleteBug);
                    row.querySelector('.view-bug').addEventListener('click', handleViewBug);
                });
            }
        }

        // Handle export bug reports
        function handleExportBugReports() {
            if (bugReports.length === 0) {
                showToast("No hay datos para exportar", "error");
                return;
            }
            
            const csvContent = generateBugReportsCSV();
            downloadCSV(csvContent, 'bug-reports.csv');
            showToast("Bug Reports exportados exitosamente", "success");
        }

        // Generate CSV content
        function generateBugReportsCSV() {
            const headers = [
                'Bug ID',
                'T√≠tulo',
                'Caso de Prueba',
                'Pasos para Reproducir',
                'Resultado Actual',
                'Resultado Esperado',
                'Severidad',
                'Prioridad',
                'Estado',
                'Reportado por',
                'Asignado a',
                'Ambiente',
                'Navegador',
                'Adjuntos',
                'Fecha Creaci√≥n',
                '√öltima Actualizaci√≥n'
            ];
            
            const rows = bugReports.map(bug => [
                bug.bug_id,
                bug.title,
                bug.test_case_id || '',
                bug.steps_to_reproduce,
                bug.actual_result,
                bug.expected_result,
                bug.severity,
                bug.priority,
                bug.status,
                bug.reporter,
                bug.assignee || '',
                bug.environment,
                bug.browser,
                bug.attachments || '',
                new Date(bug.created_at).toLocaleDateString(),
                new Date(bug.updated_at).toLocaleDateString()
            ]);
            
            return [headers, ...rows]
                .map(row => row.map(cell => `"${cell.replace(/"/g, '""')}"`).join(','))
                .join('\n');
        }

        // Download CSV
        function downloadCSV(content, filename) {
            const blob = new Blob([content], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', filename);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // Handle clear bug reports
        async function handleClearBugReports() {
            if (bugReports.length === 0) {
                showToast("No hay datos para limpiar", "error");
                return;
            }
            
            // Create inline confirmation
            const container = document.getElementById('bug-reports-container');
            const confirmDiv = document.createElement('div');
            confirmDiv.className = 'bg-red-50 border border-red-200 rounded-lg p-6 mb-6 text-center';
            confirmDiv.innerHTML = `
                <div class="text-red-700 mb-4">
                    <div class="text-lg font-semibold mb-2">‚ö†Ô∏è Confirmar Eliminaci√≥n</div>
                    <p>¬øEliminar todos los ${bugReports.length} bug reports? Esta acci√≥n no se puede deshacer.</p>
                </div>
                <div class="flex justify-center gap-4">
                    <button id="confirm-clear" class="bg-red-600 text-white px-6 py-2 rounded hover:bg-red-700">
                        Eliminar Todo
                    </button>
                    <button id="cancel-clear" class="bg-gray-600 text-white px-6 py-2 rounded hover:bg-gray-700">
                        Cancelar
                    </button>
                </div>
            `;
            
            container.insertBefore(confirmDiv, container.firstChild);
            
            // Handle confirmation
            document.getElementById('confirm-clear').addEventListener('click', async () => {
                if (window.dataSdk) {
                    // Delete all entries
                    for (const bug of bugReports) {
                        await window.dataSdk.delete(bug);
                    }
                    showToast("Bug Reports limpiados exitosamente", "success");
                } else {
                    bugReports = [];
                    renderBugReports();
                    showToast("Bug Reports limpiados exitosamente", "success");
                }
                confirmDiv.remove();
                generateNextBugId();
            });
            
            // Handle cancellation
            document.getElementById('cancel-clear').addEventListener('click', () => {
                confirmDiv.remove();
            });
        }

        // Inline editing functions
        function startInlineEdit(field) {
            const display = document.getElementById(`${field}-display`);
            const input = document.getElementById(`${field}-edit`);
            const saveBtn = document.getElementById(`${field}-save`);
            const cancelBtn = document.getElementById(`${field}-cancel`);
            
            // Set input value to current display value
            input.value = display.textContent;
            
            // Hide display, show input and buttons
            display.classList.add('hidden');
            input.classList.remove('hidden');
            saveBtn.classList.remove('hidden');
            cancelBtn.classList.remove('hidden');
            
            // Focus input and select text
            input.focus();
            input.select();
        }

        async function saveInlineEdit(field, configKey) {
            const display = document.getElementById(`${field}-display`);
            const input = document.getElementById(`${field}-edit`);
            const saveBtn = document.getElementById(`${field}-save`);
            const cancelBtn = document.getElementById(`${field}-cancel`);
            
            const newValue = input.value.trim();
            
            if (newValue === '') {
                showToast("El valor no puede estar vac√≠o", "error");
                return;
            }
            
            // Update config
            const updateConfig = { [configKey]: newValue };
            
            try {
                if (window.elementSdk) {
                    await window.elementSdk.setConfig(updateConfig);
                }
                
                // Update display
                display.textContent = newValue;
                
                showToast("Configuraci√≥n actualizada exitosamente", "success");
            } catch (error) {
                console.error("Error updating config:", error);
                showToast("Error al actualizar la configuraci√≥n", "error");
            }
            
            // Hide input and buttons, show display
            cancelInlineEdit(field);
        }

        function cancelInlineEdit(field) {
            const display = document.getElementById(`${field}-display`);
            const input = document.getElementById(`${field}-edit`);
            const saveBtn = document.getElementById(`${field}-save`);
            const cancelBtn = document.getElementById(`${field}-cancel`);
            
            // Hide input and buttons, show display
            display.classList.remove('hidden');
            input.classList.add('hidden');
            saveBtn.classList.add('hidden');
            cancelBtn.classList.add('hidden');
        }

        // Show toast message
        function showToast(message, type = "info") {
            const toast = document.createElement('div');
            toast.className = `fixed top-4 right-4 px-6 py-3 rounded-lg text-white font-medium z-50 ${
                type === 'success' ? 'bg-green-600' : 
                type === 'error' ? 'bg-red-600' : 'bg-blue-600'
            }`;
            toast.textContent = message;
            
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.remove();
            }, 3000);
        }

        // Initialize app when DOM is loaded
        document.addEventListener('DOMContentLoaded', initializeApp);
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'99657ffe64c6341c',t:'MTc2MTc3MDU1Mi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
