<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro de Defectos (Bug Report)</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            color: #2d3748;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: white;
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border-left: 8px solid #e53e3e;
            text-align: center;
        }

        .main-title {
            font-size: 2.5em;
            font-weight: bold;
            color: #2d3748;
            margin-bottom: 15px;
        }

        .subtitle {
            font-size: 1.3em;
            color: #4a5568;
            margin-bottom: 20px;
        }

        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .metric-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-left: 5px solid #4299e1;
            transition: transform 0.3s ease;
        }

        .metric-card:hover {
            transform: translateY(-5px);
        }

        .metric-card.critical {
            border-left-color: #e53e3e;
        }

        .metric-card.high {
            border-left-color: #ed8936;
        }

        .metric-card.medium {
            border-left-color: #ecc94b;
        }

        .metric-card.low {
            border-left-color: #48bb78;
        }

        .metric-number {
            font-size: 2.5em;
            font-weight: bold;
            color: #4299e1;
            margin-bottom: 10px;
        }

        .metric-number.critical {
            color: #e53e3e;
        }

        .metric-number.high {
            color: #ed8936;
        }

        .metric-number.medium {
            color: #ecc94b;
        }

        .metric-number.low {
            color: #48bb78;
        }

        .metric-label {
            font-size: 1.1em;
            color: #4a5568;
            font-weight: bold;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 30px;
        }

        .bug-form {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .form-title {
            font-size: 1.8em;
            font-weight: bold;
            color: #2d3748;
            margin-bottom: 30px;
            text-align: center;
        }

        .form-section {
            margin-bottom: 30px;
            padding: 20px;
            background: #f7fafc;
            border-radius: 15px;
            border-left: 4px solid #4299e1;
        }

        .section-title {
            font-size: 1.2em;
            font-weight: bold;
            color: #2d3748;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }

        .section-icon {
            margin-right: 10px;
            font-size: 1.3em;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-label {
            font-size: 0.9em;
            color: #4a5568;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .form-input, .form-select, .form-textarea {
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s ease;
        }

        .form-input:focus, .form-select:focus, .form-textarea:focus {
            outline: none;
            border-color: #4299e1;
        }

        .form-textarea {
            min-height: 100px;
            resize: vertical;
        }

        .severity-badge, .priority-badge, .status-badge {
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: bold;
            text-align: center;
            display: inline-block;
            margin: 5px;
        }

        .severity-critical {
            background: #fed7d7;
            color: #c53030;
        }

        .severity-high {
            background: #feebc8;
            color: #c05621;
        }

        .severity-medium {
            background: #fefcbf;
            color: #975a16;
        }

        .severity-low {
            background: #c6f6d5;
            color: #22543d;
        }

        .priority-urgent {
            background: #fed7d7;
            color: #c53030;
        }

        .priority-high {
            background: #feebc8;
            color: #c05621;
        }

        .priority-medium {
            background: #fefcbf;
            color: #975a16;
        }

        .priority-low {
            background: #c6f6d5;
            color: #22543d;
        }

        .status-new {
            background: #bee3f8;
            color: #2c5282;
        }

        .status-open {
            background: #feebc8;
            color: #c05621;
        }

        .status-progress {
            background: #e6fffa;
            color: #234e52;
        }

        .status-resolved {
            background: #c6f6d5;
            color: #22543d;
        }

        .status-closed {
            background: #e2e8f0;
            color: #4a5568;
        }

        .file-upload {
            border: 2px dashed #cbd5e0;
            border-radius: 10px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .file-upload:hover {
            border-color: #4299e1;
            background: #f7fafc;
        }

        .file-upload.dragover {
            border-color: #4299e1;
            background: #ebf8ff;
        }

        .upload-icon {
            font-size: 3em;
            color: #cbd5e0;
            margin-bottom: 15px;
        }

        .upload-text {
            color: #4a5568;
            font-size: 1.1em;
        }

        .file-list {
            margin-top: 15px;
        }

        .file-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px;
            background: white;
            border-radius: 8px;
            margin: 5px 0;
            border: 1px solid #e2e8f0;
        }

        .file-info {
            display: flex;
            align-items: center;
        }

        .file-icon {
            margin-right: 10px;
            font-size: 1.2em;
            color: #4299e1;
        }

        .file-name {
            font-weight: bold;
            color: #2d3748;
        }

        .file-size {
            color: #718096;
            font-size: 0.9em;
            margin-left: 10px;
        }

        .remove-file {
            background: #e53e3e;
            color: white;
            border: none;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            cursor: pointer;
            font-size: 0.8em;
        }

        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .sidebar-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .sidebar-title {
            font-size: 1.2em;
            font-weight: bold;
            color: #2d3748;
            margin-bottom: 15px;
        }

        .template-button {
            background: #f7fafc;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            padding: 15px;
            margin: 5px 0;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
        }

        .template-button:hover {
            border-color: #4299e1;
            background: #ebf8ff;
        }

        .template-title {
            font-weight: bold;
            color: #2d3748;
            margin-bottom: 5px;
        }

        .template-description {
            color: #4a5568;
            font-size: 0.9em;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .action-button {
            background: linear-gradient(135deg, #4299e1, #3182ce);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            font-size: 1em;
        }

        .action-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
        }

        .action-button.secondary {
            background: linear-gradient(135deg, #718096, #4a5568);
        }

        .action-button.danger {
            background: linear-gradient(135deg, #e53e3e, #c53030);
        }

        .action-button.success {
            background: linear-gradient(135deg, #48bb78, #38a169);
        }

        .bug-list {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin: 30px 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .list-title {
            font-size: 1.8em;
            font-weight: bold;
            color: #2d3748;
            text-align: center;
            margin-bottom: 30px;
        }

        .bug-item {
            background: #f7fafc;
            border-radius: 15px;
            padding: 20px;
            margin: 15px 0;
            border-left: 5px solid #4299e1;
            transition: transform 0.3s ease;
        }

        .bug-item:hover {
            transform: translateX(5px);
        }

        .bug-item.critical {
            border-left-color: #e53e3e;
        }

        .bug-item.high {
            border-left-color: #ed8936;
        }

        .bug-item.medium {
            border-left-color: #ecc94b;
        }

        .bug-item.low {
            border-left-color: #48bb78;
        }

        .bug-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .bug-id {
            background: #2d3748;
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8em;
            font-weight: bold;
        }

        .bug-title {
            font-size: 1.1em;
            font-weight: bold;
            color: #2d3748;
            margin: 10px 0;
        }

        .bug-meta {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            align-items: center;
        }

        .bug-project {
            color: #4a5568;
            font-size: 0.9em;
        }

        .filters {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .filter-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }

        .filter-select {
            padding: 8px 12px;
            border: 2px solid #e2e8f0;
            border-radius: 6px;
            font-size: 0.9em;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .main-title {
                font-size: 2em;
            }
            
            .dashboard {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .container {
                padding: 10px;
            }
        }

        @media print {
            body {
                background: white;
            }
            
            .sidebar,
            .action-buttons,
            .filters {
                display: none;
            }
            
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        .hidden {
            display: none;
        }

        .steps-list {
            counter-reset: step-counter;
        }

        .steps-list li {
            counter-increment: step-counter;
            margin: 10px 0;
            padding-left: 30px;
            position: relative;
        }

        .steps-list li::before {
            content: counter(step-counter);
            position: absolute;
            left: 0;
            top: 0;
            background: #4299e1;
            color: white;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8em;
            font-weight: bold;
        }
    </style>
</head>
<body>

<style>
  .qs-nav{position:sticky;top:0;z-index:50;backdrop-filter:saturate(140%) blur(6px);background:rgba(255,255,255,.85);border-bottom:1px solid #e5e7eb}
  .qs-nav .wrap{max-width:1100px;margin:0 auto;padding:10px 16px;display:flex;gap:12px;align-items:center;justify-content:space-between;font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial}
  .qs-brand{display:flex;gap:10px;align-items:center;color:#1f2937;font-weight:600;text-decoration:none}
  .qs-tabs{display:flex;gap:8px;flex-wrap:wrap}
  .qs-btn{border:0;padding:8px 12px;border-radius:999px;background:#f3f4f6;color:#111827;cursor:pointer;text-decoration:none}
  .qs-btn[aria-current="page"]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;pointer-events:none}
  @media (max-width:720px){ .qs-tabs{flex:1;justify-content:flex-end} .qs-brand span{display:none} }
</style>
<div class="qs-nav">
  <div class="wrap">
    <a class="qs-brand" href="index.html"><span>Plataforma QS</span></a>
    <nav class="qs-tabs" aria-label="Navegación">
      <a class="qs-btn" href="materiales.html">Materiales</a>
      <a class="qs-btn" href="asistencia.html">Asistencia</a>
      <a class="qs-btn" href="calificaciones.html">Calificaciones</a>
      <a class="qs-btn" href="Foro.html">Foro</a>
      <a class="qs-btn" href="paneldocente.html">Panel</a>
      <a class="qs-btn" href="roadmap.html">Roadmap</a>
          <a class="qs-btn" href="checklist.html">Checklist</a>
\1
  </div>
</div>
<script>
(function(){
  var path = (location.pathname.split('/').pop()||'index.html').toLowerCase();
  document.querySelectorAll('.qs-tabs a.qs-btn').forEach(function(a){
    if (a.getAttribute('href').toLowerCase() === path) a.setAttribute('aria-current','page');
  });
})();
window.google = window.google || {};
google.script = google.script || {};
if (!google.script.run){
  google.script.run = new Proxy({}, { get:() => ()=>({ withSuccessHandler: f=>({ withFailureHandler: g=>({ }) }) }) });
}
</script>


    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="main-title">?? Registro de Defectos</div>
            <div class="subtitle">Sistema de Gestin de Bug Reports</div>
        </div>

        <!-- Dashboard -->
        <div class="dashboard">
            <div class="metric-card critical">
                <div class="metric-number critical" id="criticalBugs">2</div>
                <div class="metric-label">Crticos</div>
            </div>
            <div class="metric-card high">
                <div class="metric-number high" id="highBugs">5</div>
                <div class="metric-label">Alta Severidad</div>
            </div>
            <div class="metric-card medium">
                <div class="metric-number medium" id="mediumBugs">8</div>
                <div class="metric-label">Media Severidad</div>
            </div>
            <div class="metric-card low">
                <div class="metric-number low" id="lowBugs">12</div>
                <div class="metric-label">Baja Severidad</div>
            </div>
            <div class="metric-card">
                <div class="metric-number" id="totalBugs">27</div>
                <div class="metric-label">Total Defectos</div>
            </div>
            <div class="metric-card">
                <div class="metric-number" id="openBugs">18</div>
                <div class="metric-label">Abiertos</div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Bug Form -->
            <div class="bug-form">
                <div class="form-title">?? Nuevo Reporte de Defecto</div>

                <!-- Basic Information -->
                <div class="form-section">
                    <div class="section-title">
                        <span class="section-icon">??</span>
                        Informacin Bsica
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">ID del Defecto</label>
                            <input type="text" class="form-input" id="bugId" value="BUG-001" readonly>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Proyecto</label>
                            <select class="form-select" id="project">
                                <option value="sistema-login">Sistema de Login</option>
                                <option value="ecommerce">E-commerce Platform</option>
                                <option value="crm">CRM System</option>
                                <option value="mobile-app">Mobile App</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Mdulo</label>
                            <input type="text" class="form-input" id="module" value="Autenticacin" placeholder="Ej: Autenticacin, Pagos, Reportes">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Build/Versin</label>
                            <input type="text" class="form-input" id="version" value="v1.1.23" placeholder="Ej: v1.1.23">
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Ttulo del Defecto</label>
                        <input type="text" class="form-input" id="title" value="El sistema no muestra mensaje de error al usar contrase?a incorrecta en el login" placeholder="Breve y descriptivo">
                    </div>
                </div>

                <!-- Classification -->
                <div class="form-section">
                    <div class="section-title">
                        <span class="section-icon">???</span>
                        Clasificacin
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Severidad</label>
                            <select class="form-select" id="severity" onchange="updateSeverityInfo()">
                                <option value="critical">Crtica - Bloquea funcionalidad principal</option>
                                <option value="high">Alta - Afecta funcionalidad importante</option>
                                <option value="medium" selected>Media - Problema de usabilidad notable</option>
                                <option value="low">Baja - Problema cosmtico</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Prioridad</label>
                            <select class="form-select" id="priority">
                                <option value="urgent">Urgente - Arreglar inmediatamente</option>
                                <option value="high" selected>Alta - Prximo release</option>
                                <option value="medium">Media - Si hay tiempo</option>
                                <option value="low">Baja - Puede posponerse</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Estado</label>
                            <select class="form-select" id="status">
                                <option value="new" selected>Nuevo</option>
                                <option value="open">Abierto</option>
                                <option value="progress">En Progreso</option>
                                <option value="resolved">Resuelto</option>
                                <option value="closed">Cerrado</option>
                                <option value="reopened">Reabierto</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Entorno</label>
                            <input type="text" class="form-input" id="environment" value="Windows 10, Chrome v105" placeholder="SO, Navegador, Dispositivo">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Reportado por</label>
                            <input type="text" class="form-input" id="reporter" value="Mara Gonzlez" placeholder="Tu nombre">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Asignado a</label>
                            <select class="form-select" id="assignee">
                                <option value="">Sin asignar</option>
                                <option value="juan-perez">Juan Prez - Frontend</option>
                                <option value="ana-lopez">Ana Lpez - Backend</option>
                                <option value="carlos-ruiz">Carlos Ruiz - Full Stack</option>
                                <option value="sofia-martinez">Sofa Martnez - QA Lead</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Description -->
                <div class="form-section">
                    <div class="section-title">
                        <span class="section-icon">??</span>
                        Descripcin Detallada
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Descripcin del Problema</label>
                        <textarea class="form-textarea" id="description" placeholder="Descripcin detallada del problema y su impacto en el usuario">Cuando un usuario intenta iniciar sesin con credenciales incorrectas, el sistema no proporciona retroalimentacin visual clara sobre el error. Esto genera confusin en los usuarios y puede llevar a mltiples intentos fallidos de login, afectando la experiencia de usuario y potencialmente bloqueando cuentas por seguridad.</textarea>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Pasos para Reproducir</label>
                        <textarea class="form-textarea" id="stepsToReproduce" placeholder="Secuencia exacta y numerada de pasos">1. Navegar a la pgina de login (https://app.ejemplo.com/login)
2. Ingresar un usuario vlido ('testuser')
3. Ingresar una contrase?a INCORRECTA ('badpassword')
4. Hacer clic en el botn "Ingresar"</textarea>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Resultado Actual</label>
                            <textarea class="form-textarea" id="actualResult" placeholder="?Qu pas?">La pgina se recarga, los campos de usuario y contrase?a se vacan, pero no se muestra ningn mensaje de error. El usuario no recibe ninguna indicacin de que las credenciales fueron incorrectas.</textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Resultado Esperado</label>
                            <textarea class="form-textarea" id="expectedResult" placeholder="?Qu debi pasar?">Debajo del campo de contrase?a, debi aparecer un mensaje de error en color rojo que diga 'Usuario o contrase?a incorrectos'. Los campos no deberan vaciarse para permitir al usuario corregir fcilmente.</textarea>
                        </div>
                    </div>
                </div>

                <!-- File Attachments -->
                <div class="form-section">
                    <div class="section-title">
                        <span class="section-icon">??</span>
                        Archivos Adjuntos
                    </div>
                    
                    <div class="file-upload" id="fileUpload" onclick="document.getElementById('fileInput').click()">
                        <div class="upload-icon">??</div>
                        <div class="upload-text">
                            <strong>Haga clic para seleccionar archivos</strong><br>
                            o arrastre y suelte aqu<br>
                            <small>Capturas de pantalla, videos, logs (Max 10MB por archivo)</small>
                        </div>
                        <input type="file" id="fileInput" multiple accept="image/*,video/*,.txt,.log,.pdf" style="display: none;" onchange="handleFileSelect(event)">
                    </div>
                    
                    <div class="file-list" id="fileList">
                        <!-- Files will be displayed here -->
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="action-buttons">
                    <button class="action-button success" onclick="submitBugReport()">?? Crear Reporte</button>
                    <button class="action-button secondary" onclick="previewReport()">??? Vista Previa</button>
                    <button class="action-button secondary" onclick="saveDraft()">?? Guardar Borrador</button>
                    <button class="action-button" onclick="clearForm()">??? Limpiar Formulario</button>
                </div>
            </div>

            <!-- Sidebar -->
            <div class="sidebar">
                <!-- Templates -->
                <div class="sidebar-card">
                    <div class="sidebar-title">?? Plantillas Rpidas</div>
                    
                    <div class="template-button" onclick="loadTemplate('login')">
                        <div class="template-title">?? Error de Login</div>
                        <div class="template-description">Problemas de autenticacin y acceso</div>
                    </div>
                    
                    <div class="template-button" onclick="loadTemplate('ui')">
                        <div class="template-title">?? Error de UI/UX</div>
                        <div class="template-description">Problemas de interfaz y usabilidad</div>
                    </div>
                    
                    <div class="template-button" onclick="loadTemplate('performance')">
                        <div class="template-title">? Problema de Rendimiento</div>
                        <div class="template-description">Lentitud y problemas de performance</div>
                    </div>
                    
                    <div class="template-button" onclick="loadTemplate('data')">
                        <div class="template-title">?? Error de Datos</div>
                        <div class="template-description">Problemas con datos y base de datos</div>
                    </div>
                </div>

                <!-- Guidelines -->
                <div class="sidebar-card">
                    <div class="sidebar-title">?? Consejos para Reportes</div>
                    <ul style="color: #4a5568; font-size: 0.9em; line-height: 1.6;">
                        <li>Sea especfico en el ttulo</li>
                        <li>Incluya pasos detallados para reproducir</li>
                        <li>Adjunte capturas de pantalla</li>
                        <li>Especifique el entorno exacto</li>
                        <li>Describa el impacto en el usuario</li>
                        <li>Use un lenguaje claro y objetivo</li>
                    </ul>
                </div>

                <!-- Quick Actions -->
                <div class="sidebar-card">
                    <div class="sidebar-title">? Acciones Rpidas</div>
                    <button class="action-button" style="width: 100%; margin: 5px 0;" onclick="generateBugId()">?? Generar Nuevo ID</button>
                    <button class="action-button secondary" style="width: 100%; margin: 5px 0;" onclick="exportToPDF()">?? Exportar PDF</button>
                    <button class="action-button secondary" style="width: 100%; margin: 5px 0;" onclick="sendNotification()">?? Notificar Equipo</button>
                </div>
            </div>
        </div>

        <!-- Filters -->
        <div class="filters">
            <div class="filter-row">
                <select class="filter-select" id="projectFilter" onchange="applyFilters()">
                    <option value="all">Todos los Proyectos</option>
                    <option value="sistema-login">Sistema de Login</option>
                    <option value="ecommerce">E-commerce Platform</option>
                    <option value="crm">CRM System</option>
                </select>
                
                <select class="filter-select" id="severityFilter" onchange="applyFilters()">
                    <option value="all">Todas las Severidades</option>
                    <option value="critical">Crtica</option>
                    <option value="high">Alta</option>
                    <option value="medium">Media</option>
                    <option value="low">Baja</option>
                </select>
                
                <select class="filter-select" id="statusFilter" onchange="applyFilters()">
                    <option value="all">Todos los Estados</option>
                    <option value="new">Nuevo</option>
                    <option value="open">Abierto</option>
                    <option value="progress">En Progreso</option>
                    <option value="resolved">Resuelto</option>
                </select>
                
                <input type="text" class="filter-select" id="searchFilter" placeholder="Buscar por ttulo o ID..." onkeyup="applyFilters()">
            </div>
        </div>

        <!-- Bug List -->
        <div class="bug-list">
            <div class="list-title">?? Defectos Registrados</div>
            
            <div class="bug-item medium" data-project="sistema-login" data-severity="medium" data-status="new">
                <div class="bug-header">
                    <span class="bug-id">BUG-001</span>
                    <div class="bug-meta">
                        <span class="severity-badge severity-medium">Media</span>
                        <span class="priority-badge priority-high">Alta</span>
                        <span class="status-badge status-new">Nuevo</span>
                    </div>
                </div>
                <div class="bug-title">El sistema no muestra mensaje de error al usar contrase?a incorrecta en el login</div>
                <div class="bug-project">Sistema de Login ? Mdulo: Autenticacin ? v1.1.23</div>
            </div>
            
            <div class="bug-item critical" data-project="ecommerce" data-severity="critical" data-status="open">
                <div class="bug-header">
                    <span class="bug-id">BUG-002</span>
                    <div class="bug-meta">
                        <span class="severity-badge severity-critical">Crtica</span>
                        <span class="priority-badge priority-urgent">Urgente</span>
                        <span class="status-badge status-open">Abierto</span>
                    </div>
                </div>
                <div class="bug-title">El carrito de compras se vaca al cambiar de pgina</div>
                <div class="bug-project">E-commerce Platform ? Mdulo: Carrito ? v2.3.1</div>
            </div>
            
            <div class="bug-item high" data-project="crm" data-severity="high" data-status="progress">
                <div class="bug-header">
                    <span class="bug-id">BUG-003</span>
                    <div class="bug-meta">
                        <span class="severity-badge severity-high">Alta</span>
                        <span class="priority-badge priority-high">Alta</span>
                        <span class="status-badge status-progress">En Progreso</span>
                    </div>
                </div>
                <div class="bug-title">Los reportes de ventas muestran datos incorrectos</div>
                <div class="bug-project">CRM System ? Mdulo: Reportes ? v1.5.8</div>
            </div>
        </div>
    </div>

    <script>
        let bugCounter = 1;
        let attachedFiles = [];

        // Templates
        const templates = {
            login: {
                title: "Error de autenticacin en el sistema de login",
                module: "Autenticacin",
                description: "El usuario no puede acceder al sistema debido a un problema en el proceso de autenticacin.",
                stepsToReproduce: "1. Navegar a la pgina de login\n2. Ingresar credenciales vlidas\n3. Hacer clic en 'Iniciar Sesin'\n4. Observar el comportamiento",
                actualResult: "El sistema no permite el acceso o muestra un error inesperado",
                expectedResult: "El usuario debera poder acceder al sistema correctamente"
            },
            ui: {
                title: "Problema de interfaz de usuario",
                module: "Frontend",
                description: "Elemento de la interfaz no se comporta como se esperaba, afectando la experiencia del usuario.",
                stepsToReproduce: "1. Navegar a la pgina afectada\n2. Interactuar con el elemento problemtico\n3. Observar el comportamiento",
                actualResult: "El elemento no responde o se muestra incorrectamente",
                expectedResult: "El elemento debera funcionar segn el dise?o especificado"
            },
            performance: {
                title: "Problema de rendimiento del sistema",
                module: "Performance",
                description: "El sistema presenta lentitud o demoras excesivas en la respuesta.",
                stepsToReproduce: "1. Realizar la accin que causa lentitud\n2. Medir el tiempo de respuesta\n3. Comparar con el rendimiento esperado",
                actualResult: "El sistema responde lentamente o se congela",
                expectedResult: "El sistema debera responder en un tiempo aceptable (< 3 segundos)"
            },
            data: {
                title: "Error en el manejo de datos",
                module: "Base de Datos",
                description: "Los datos no se guardan, recuperan o procesan correctamente.",
                stepsToReproduce: "1. Realizar operacin con datos\n2. Verificar el resultado\n3. Comprobar la persistencia de los datos",
                actualResult: "Los datos no se procesan correctamente",
                expectedResult: "Los datos deberan procesarse y almacenarse correctamente"
            }
        };

        // Load template
        function loadTemplate(templateName) {
            const template = templates[templateName];
            if (template) {
                document.getElementById('title').value = template.title;
                document.getElementById('module').value = template.module;
                document.getElementById('description').value = template.description;
                document.getElementById('stepsToReproduce').value = template.stepsToReproduce;
                document.getElementById('actualResult').value = template.actualResult;
                document.getElementById('expectedResult').value = template.expectedResult;
                
                showNotification(`Plantilla "${templateName}" cargada exitosamente`, 'success');
            }
        }

        // Generate new bug ID
        function generateBugId() {
            bugCounter++;
            const newId = `BUG-${String(bugCounter).padStart(3, '0')}`;
            document.getElementById('bugId').value = newId;
            showNotification(`Nuevo ID generado: ${newId}`, 'info');
        }

        // File handling
        function handleFileSelect(event) {
            const files = Array.from(event.target.files);
            files.forEach(file => {
                if (file.size <= 10 * 1024 * 1024) { // 10MB limit
                    attachedFiles.push(file);
                    addFileToList(file);
                } else {
                    showNotification(`El archivo ${file.name} es demasiado grande (mximo 10MB)`, 'error');
                }
            });
        }

        function addFileToList(file) {
            const fileList = document.getElementById('fileList');
            const fileItem = document.createElement('div');
            fileItem.className = 'file-item';
            
            const fileIcon = getFileIcon(file.type);
            const fileSize = formatFileSize(file.size);
            
            fileItem.innerHTML = `
                <div class="file-info">
                    <span class="file-icon">${fileIcon}</span>
                    <span class="file-name">${file.name}</span>
                    <span class="file-size">${fileSize}</span>
                </div>
                <button class="remove-file" onclick="removeFile('${file.name}', this)"></button>
            `;
            
            fileList.appendChild(fileItem);
        }

        function getFileIcon(fileType) {
            if (fileType.startsWith('image/')) return '???';
            if (fileType.startsWith('video/')) return '??';
            if (fileType.includes('pdf')) return '??';
            if (fileType.includes('text')) return '??';
            return '??';
        }

        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        function removeFile(fileName, button) {
            attachedFiles = attachedFiles.filter(file => file.name !== fileName);
            button.parentElement.remove();
            showNotification(`Archivo ${fileName} eliminado`, 'info');
        }

        // Drag and drop
        const fileUpload = document.getElementById('fileUpload');
        
        fileUpload.addEventListener('dragover', (e) => {
            e.preventDefault();
            fileUpload.classList.add('dragover');
        });
        
        fileUpload.addEventListener('dragleave', () => {
            fileUpload.classList.remove('dragover');
        });
        
        fileUpload.addEventListener('drop', (e) => {
            e.preventDefault();
            fileUpload.classList.remove('dragover');
            
            const files = Array.from(e.dataTransfer.files);
            files.forEach(file => {
                if (file.size <= 10 * 1024 * 1024) {
                    attachedFiles.push(file);
                    addFileToList(file);
                } else {
                    showNotification(`El archivo ${file.name} es demasiado grande (mximo 10MB)`, 'error');
                }
            });
        });

        // Form actions
        function submitBugReport() {
            const formData = collectFormData();
            
            if (validateForm(formData)) {
                // Simulate submission
                showNotification('Reporte de defecto creado exitosamente', 'success');
                
                // Add to bug list
                addBugToList(formData);
                
                // Clear form
                setTimeout(() => {
                    clearForm();
                    generateBugId();
                }, 1000);
            }
        }

        function collectFormData() {
            return {
                id: document.getElementById('bugId').value,
                title: document.getElementById('title').value,
                project: document.getElementById('project').value,
                module: document.getElementById('module').value,
                version: document.getElementById('version').value,
                severity: document.getElementById('severity').value,
                priority: document.getElementById('priority').value,
                status: document.getElementById('status').value,
                environment: document.getElementById('environment').value,
                reporter: document.getElementById('reporter').value,
                assignee: document.getElementById('assignee').value,
                description: document.getElementById('description').value,
                stepsToReproduce: document.getElementById('stepsToReproduce').value,
                actualResult: document.getElementById('actualResult').value,
                expectedResult: document.getElementById('expectedResult').value,
                attachments: attachedFiles
            };
        }

        function validateForm(data) {
            const required = ['title', 'project', 'module', 'description', 'stepsToReproduce'];
            const missing = required.filter(field => !data[field] || data[field].trim() === '');
            
            if (missing.length > 0) {
                showNotification(`Campos requeridos faltantes: ${missing.join(', ')}`, 'error');
                return false;
            }
            
            return true;
        }

        function addBugToList(data) {
            const bugList = document.querySelector('.bug-list');
            const bugItem = document.createElement('div');
            bugItem.className = `bug-item ${data.severity}`;
            bugItem.setAttribute('data-project', data.project);
            bugItem.setAttribute('data-severity', data.severity);
            bugItem.setAttribute('data-status', data.status);
            
            const projectName = document.querySelector(`#project option[value="${data.project}"]`).textContent;
            
            bugItem.innerHTML = `
                <div class="bug-header">
                    <span class="bug-id">${data.id}</span>
                    <div class="bug-meta">
                        <span class="severity-badge severity-${data.severity}">${data.severity.charAt(0).toUpperCase() + data.severity.slice(1)}</span>
                        <span class="priority-badge priority-${data.priority}">${data.priority.charAt(0).toUpperCase() + data.priority.slice(1)}</span>
                        <span class="status-badge status-${data.status}">${data.status.charAt(0).toUpperCase() + data.status.slice(1)}</span>
                    </div>
                </div>
                <div class="bug-title">${data.title}</div>
                <div class="bug-project">${projectName} ? Mdulo: ${data.module} ? ${data.version}</div>
            `;
            
            // Insert at the beginning
            const firstBugItem = bugList.querySelector('.bug-item');
            if (firstBugItem) {
                bugList.insertBefore(bugItem, firstBugItem);
            } else {
                bugList.appendChild(bugItem);
            }
        }

        function previewReport() {
            const formData = collectFormData();
            
            // Create preview window
            const previewWindow = window.open('', '_blank', 'width=800,height=600');
            previewWindow.document.write(`
                <html>
                <head>
                    <title>Vista Previa - ${formData.id}</title>
                    <style>
                        body { font-family: Arial, sans-serif; padding: 20px; line-height: 1.6; }
                        .header { background: #f0f0f0; padding: 15px; border-radius: 5px; margin-bottom: 20px; }
                        .section { margin: 20px 0; }
                        .label { font-weight: bold; color: #333; }
                        .value { margin-bottom: 10px; }
                        .steps { counter-reset: step; }
                        .steps li { counter-increment: step; margin: 5px 0; }
                    </style>
                </head>
                <body>
                    <div class="header">
                        <h1>?? ${formData.title}</h1>
                        <p><strong>ID:</strong> ${formData.id} | <strong>Proyecto:</strong> ${formData.project}</p>
                    </div>
                    
                    <div class="section">
                        <div class="label">Descripcin:</div>
                        <div class="value">${formData.description}</div>
                    </div>
                    
                    <div class="section">
                        <div class="label">Pasos para Reproducir:</div>
                        <ol class="steps">
                            ${formData.stepsToReproduce.split('\n').map(step => `<li>${step}</li>`).join('')}
                        </ol>
                    </div>
                    
                    <div class="section">
                        <div class="label">Resultado Actual:</div>
                        <div class="value">${formData.actualResult}</div>
                    </div>
                    
                    <div class="section">
                        <div class="label">Resultado Esperado:</div>
                        <div class="value">${formData.expectedResult}</div>
                    </div>
                    
                    <div class="section">
                        <div class="label">Archivos Adjuntos:</div>
                        <div class="value">${attachedFiles.length} archivo(s) adjunto(s)</div>
                    </div>
                </body>
                </html>
            `);
        }

        function saveDraft() {
            const formData = collectFormData();
            localStorage.setItem('bugReportDraft', JSON.stringify(formData));
            showNotification('Borrador guardado exitosamente', 'success');
        }

        function clearForm() {
            document.getElementById('title').value = '';
            document.getElementById('module').value = '';
            document.getElementById('description').value = '';
            document.getElementById('stepsToReproduce').value = '';
            document.getElementById('actualResult').value = '';
            document.getElementById('expectedResult').value = '';
            document.getElementById('fileList').innerHTML = '';
            attachedFiles = [];
            
            // Reset selects to default
            document.getElementById('severity').selectedIndex = 2; // Medium
            document.getElementById('priority').selectedIndex = 1; // High
            document.getElementById('status').selectedIndex = 0; // New
            document.getElementById('assignee').selectedIndex = 0; // Unassigned
        }

        // Filters
        function applyFilters() {
            const projectFilter = document.getElementById('projectFilter').value;
            const severityFilter = document.getElementById('severityFilter').value;
            const statusFilter = document.getElementById('statusFilter').value;
            const searchFilter = document.getElementById('searchFilter').value.toLowerCase();
            
            const bugItems = document.querySelectorAll('.bug-item');
            
            bugItems.forEach(item => {
                let show = true;
                
                if (projectFilter !== 'all' && item.getAttribute('data-project') !== projectFilter) {
                    show = false;
                }
                
                if (severityFilter !== 'all' && item.getAttribute('data-severity') !== severityFilter) {
                    show = false;
                }
                
                if (statusFilter !== 'all' && item.getAttribute('data-status') !== statusFilter) {
                    show = false;
                }
                
                if (searchFilter && !item.textContent.toLowerCase().includes(searchFilter)) {
                    show = false;
                }
                
                item.style.display = show ? 'block' : 'none';
            });
        }

        // Export functions
        function exportToPDF() {
            showNotification('Generando PDF... Descarga iniciar en breve', 'info');
            setTimeout(() => {
                showNotification('PDF generado exitosamente', 'success');
            }, 2000);
        }

        function sendNotification() {
            const assignee = document.getElementById('assignee').value;
            if (assignee) {
                showNotification(`Notificacin enviada a ${assignee}`, 'success');
            } else {
                showNotification('Seleccione un responsable para notificar', 'error');
            }
        }

        // Notification system
        function showNotification(message, type) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 20px;
                border-radius: 10px;
                color: white;
                font-weight: bold;
                z-index: 1000;
                animation: slideIn 0.3s ease;
                max-width: 300px;
            `;
            
            switch(type) {
                case 'success':
                    notification.style.background = 'linear-gradient(135deg, #48bb78, #38a169)';
                    break;
                case 'error':
                    notification.style.background = 'linear-gradient(135deg, #e53e3e, #c53030)';
                    break;
                case 'info':
                    notification.style.background = 'linear-gradient(135deg, #4299e1, #3182ce)';
                    break;
            }
            
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => {
                    if (document.body.contains(notification)) {
                        document.body.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }

        // Add CSS animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            generateBugId();
            
            // Load draft if exists
            const draft = localStorage.getItem('bugReportDraft');
            if (draft) {
                const draftData = JSON.parse(draft);
                // Optionally load draft data
            }
        });

        // Add click animations
        document.addEventListener('click', function(e) {
            if (e.target.tagName === 'BUTTON') {
                e.target.style.transform = 'scale(0.95)';
                setTimeout(() => {
                    e.target.style.transform = '';
                }, 150);
            }
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97a8ca8e902dcdb0',t:'MTc1NzEwNzQ0My4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
